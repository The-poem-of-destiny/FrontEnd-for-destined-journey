{"version":3,"file":"index.js","mappings":"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","sources":["src://tavern_helper_template/node_modules/.pnpm/vue-loader@17.4.2_@vue+compiler-sfc@3.5.29_vue@3.5.29_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/external var \"Vue\"","src://tavern_helper_template/src/home/services/worldbookload&update.ts","src://tavern_helper_template/src/home/services/CorePage.ts","webpack://tavern_helper_template/./src/home/components/CorePage.vue?06ef","webpack://tavern_helper_template/src/home/components/CorePage.vue?6cf4","src://tavern_helper_template/src/home/services/DLCManagement.ts","webpack://tavern_helper_template/./src/home/components/DLCManagementPage.vue?3058","webpack://tavern_helper_template/src/home/components/DLCManagementPage.vue?a04d","src://tavern_helper_template/src/home/services/envCheck.ts","webpack://tavern_helper_template/./src/home/components/EnvCheckPage.vue?28d2","webpack://tavern_helper_template/src/home/components/EnvCheckPage.vue?6e70","webpack://tavern_helper_template/./src/home/components/ShowcaseSection.vue?8e3c","webpack://tavern_helper_template/src/home/components/ShowcaseSection.vue?81a2","src://tavern_helper_template/src/home/services/outputMethod.ts","src://tavern_helper_template/src/home/services/StartPage.ts","webpack://tavern_helper_template/./src/home/components/StartPage.vue?a88c","webpack://tavern_helper_template/src/home/components/StartPage.vue?2ac1","webpack://tavern_helper_template/./src/home/App.vue?ded1","webpack://tavern_helper_template/src/home/App.vue?6f46","src://tavern_helper_template/src/home/index.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const __WEBPACK_NAMESPACE_OBJECT__ = Vue;","//获取世界书名字\nexport function getWorldBookName() {\n  const bookInfo = window.top?.TavernHelper.getCharWorldbookNames('current');\n  const BookName = bookInfo ? bookInfo.primary : null;\n  return BookName;\n}\n//获取条目\nexport async function getWorldbookEntries(bookName: string | null) {\n  if (!bookName) {\n    return;\n  }\n  const worldbook = await window.top?.TavernHelper.getWorldbook(bookName);\n  if (!worldbook) {\n    return;\n  }\n  return worldbook.map((entry: { name: string; enabled: boolean }) => ({\n    name: entry.name,\n    enabled: entry.enabled,\n  }));\n}\n//使用正则筛选条目\nexport async function getFilteredEntries(pattern: RegExp, bookName: string | null) {\n  const worldbook = await getWorldbookEntries(bookName);\n  if (!worldbook || worldbook.length === 0) {\n    return [];\n  }\n  return worldbook\n    .filter((entry: { name: string }) => pattern.test(entry.name))\n    .map((entry: { name: any; enabled: any }) => ({\n      name: entry.name,\n      enabled: entry.enabled,\n    }));\n}\n/**\n * 更新世界书条目的启用状态\n *\n * @param entries 修改后的条目列表，包含 name 和 enabled 属性\n * @throws 如果没有绑定世界书或世界书不存在，将会抛出错误\n *\n * @example\n * // 更新世界书\n * await updateWorldBook(entries);\n */\nexport async function updateWorldBook(\n  entries: Array<{ name: string; enabled: boolean }>,\n  bookName: string,\n): Promise<void> {\n  if (!bookName) {\n    return;\n  }\n  if (!bookName) {\n    throw new Error('No worldbook bound to current character');\n  }\n\n  const enabledMap = new Map(entries.map(e => [e.name, e.enabled]));\n\n  await window.top?.TavernHelper.updateWorldbookWith(bookName, worldbook => {\n    return worldbook.map(entry => {\n      const newEnabled = enabledMap.get(entry.name);\n      if (newEnabled !== undefined) {\n        return { ...entry, enabled: newEnabled };\n      }\n      return entry;\n    });\n  });\n}\n","import JSON5 from 'json5';\n\nimport { getFilteredEntries, getWorldBookName, updateWorldBook } from './worldbookload&update';\n\n// 未分类的默认tab名称\nexport const UNCATEGORIZED_TAB = '这是什么杯';\n\n// 固定的特别推荐tab名称\nexport const SPECIAL_RECOMMEND_TAB = '特别推荐';\n\n// 特别推荐核心配置类型\nexport interface SpecialRecommendConfig {\n  note: string;\n}\n\n// 特别推荐最大显示数量\nexport const MAX_SPECIAL_RECOMMEND_COUNT = 3;\n\n// 特别推荐核心的完整信息（包含可用性状态）\nexport interface SpecialRecommendCore {\n  value: string;\n  label: string;\n  author: string;\n  specialNote: string;\n  available: boolean; // 核心是否在核心列表中存在\n}\n\n// 核心选项类型\nexport interface CoreOption {\n  value: string;\n  label: string;\n  author: string; // 作者信息，从括号内提取\n  enabled: boolean;\n  tabs: string[]; // 改为数组，支持一个核心属于多个分组\n  note: string; // 从排行榜获取的note\n  specialNote: string; // 特别推荐的硬编码note\n}\n\n// 核心条目匹配模式 - 匹配以\"命定系统-\"开头的条目\nconst CORE_PATTERN = /^命定系统-/;\n\n// 提取作者信息的正则 - 匹配末尾括号内容\nconst AUTHOR_PATTERN = /\\(([^)]*)\\)$/;\n\n/**\n * 核心状态初始值\n */\nexport const initialCoreState = {\n  coreOptions: [] as CoreOption[],\n  localCoreSelections: new Map<string, boolean>(),\n  tabs: [] as string[],\n  activeTab: '',\n};\n\n/**\n * 核心分类数据类型\n */\ntype CoreClassificationData = Record<string, Record<string, { note?: string }>>;\n\n/**\n * 缓存的排行榜数据\n */\nlet cachedRankings: CoreClassificationData | null = null;\n\n/**\n * 缓存的特别推荐核心数据\n */\nlet cachedSpecialRecommendCores: Record<string, SpecialRecommendConfig> | null = null;\n\n/**\n * 数据基础路径 - CDN 部署环境\n * 使用版本号替代 @latest 以确保缓存正确更新\n */\nconst DATA_BASE_PATH = `https://testingcf.jsdelivr.net/gh/The-poem-of-destiny/FrontEnd-for-destined-journey@${__APP_VERSION__}/public/assets/data`;\n\n/**\n * 从远程加载核心分类数据\n * 使用 JSON5 解析，支持注释和更灵活的格式\n */\nasync function loadCoreClassification(): Promise<CoreClassificationData> {\n  if (cachedRankings !== null) {\n    return cachedRankings;\n  }\n\n  try {\n    const response = await fetch(`${DATA_BASE_PATH}/coreClassification.json`);\n    if (!response.ok) {\n      console.log('未找到核心分类数据文件 (coreClassification.json)');\n      return {};\n    }\n\n    const text = await response.text();\n    const data = JSON5.parse(text) as CoreClassificationData;\n    console.log('成功加载核心分类数据');\n    cachedRankings = data;\n    return data;\n  } catch (error) {\n    console.log('未找到核心分类数据或格式错误:', error);\n    return {};\n  }\n}\n\n/**\n * 获取排行榜数据（同步版本，使用缓存）\n */\nfunction getRankings(): CoreClassificationData | undefined {\n  return cachedRankings ?? undefined;\n}\n\n/**\n * 从远程加载特别推荐核心数据\n * 使用 JSON5 解析，支持注释和更灵活的格式\n */\nexport async function loadSpecialRecommendCores(): Promise<Record<string, SpecialRecommendConfig>> {\n  if (cachedSpecialRecommendCores !== null) {\n    return cachedSpecialRecommendCores;\n  }\n\n  try {\n    const response = await fetch(`${DATA_BASE_PATH}/SPECIAL_RECOMMEND_CORES.json`);\n    if (!response.ok) {\n      console.log('未找到特别推荐核心数据文件 (SPECIAL_RECOMMEND_CORES.json)');\n      return {};\n    }\n\n    const text = await response.text();\n    const data = JSON5.parse(text) as Record<string, SpecialRecommendConfig>;\n    console.log('成功加载特别推荐核心数据');\n    cachedSpecialRecommendCores = data;\n    return data;\n  } catch (error) {\n    console.log('未找到特别推荐核心数据或格式错误:', error);\n    return {};\n  }\n}\n\n/**\n * 从排行榜数据中动态获取所有tab名称\n */\nexport async function getTabsFromRankings(): Promise<string[]> {\n  const Rankings = await loadCoreClassification();\n  if (!Rankings || typeof Rankings !== 'object') {\n    return [SPECIAL_RECOMMEND_TAB, UNCATEGORIZED_TAB];\n  }\n\n  // 获取排行榜中的所有键作为tab\n  const dynamicTabs = Object.keys(Rankings).filter(\n    key => Rankings[key] && typeof Rankings[key] === 'object',\n  );\n\n  // 如果没有动态tab，返回默认的tabs\n  if (dynamicTabs.length === 0) {\n    return [SPECIAL_RECOMMEND_TAB, UNCATEGORIZED_TAB];\n  }\n\n  // \"特别推荐\"固定在第一位，\"这是什么杯\"作为未分类的tab放在最后\n  return [SPECIAL_RECOMMEND_TAB, ...dynamicTabs, UNCATEGORIZED_TAB];\n}\n\n/**\n * 根据核心label查找其所属的所有tab分类和note\n * 一个核心可以同时属于多个分组\n * 注意：特别推荐通过独立逻辑处理，不在此函数中添加\n * @param label 核心标签（不含前缀和作者）\n * @param allTabs 所有tab列表\n */\nexport function getCoreRanking(label: string, allTabs: string[]): { tabs: string[]; note: string } {\n  const Rankings = getRankings();\n  const matchedTabs: string[] = [];\n  let note = '';\n\n  if (Rankings && typeof Rankings === 'object') {\n    // 遍历所有tab查找核心（排除\"这是什么杯\"和\"特别推荐\"）\n    for (const tabName of allTabs) {\n      if (tabName === UNCATEGORIZED_TAB || tabName === SPECIAL_RECOMMEND_TAB) continue;\n\n      const tabData = Rankings[tabName];\n      if (tabData && typeof tabData === 'object') {\n        // 检查核心名称是否在此tab中\n        if (label in tabData) {\n          matchedTabs.push(tabName);\n          // 使用第一个匹配的note\n          if (!note && tabData[label]?.note) {\n            note = tabData[label].note;\n          }\n        }\n      }\n    }\n  }\n\n  // 未找到任何分组则归入\"这是什么杯\"\n  if (matchedTabs.length === 0) {\n    return { tabs: [UNCATEGORIZED_TAB], note: '' };\n  }\n\n  return { tabs: matchedTabs, note };\n}\n\n/**\n * 生成特别推荐核心列表（包含可用性信息）\n * 返回所有推荐核心，标记哪些在核心列表中存在（可用），最多返回 MAX_SPECIAL_RECOMMEND_COUNT 个\n * @param specialRecommendCores 特别推荐核心配置\n * @param existingCoreValues 当前存在的核心值集合\n */\nexport function generateSpecialRecommendCores(\n  specialRecommendCores: Record<string, SpecialRecommendConfig>,\n  existingCoreValues: Set<string>,\n): SpecialRecommendCore[] {\n  const result: SpecialRecommendCore[] = [];\n  let count = 0;\n\n  for (const [coreValue, config] of Object.entries(specialRecommendCores)) {\n    if (count >= MAX_SPECIAL_RECOMMEND_COUNT) {\n      break;\n    }\n\n    // 去掉\"命定系统-\"前缀\n    const nameWithoutPrefix = coreValue.replace(/^命定系统-/, '');\n    // 提取作者信息（括号内容）\n    const authorMatch = nameWithoutPrefix.match(/\\(([^)]*)\\)$/);\n    const author = authorMatch ? authorMatch[1] : '';\n    // 去掉末尾括号内容作为显示标签\n    const label = nameWithoutPrefix.replace(/\\(([^)]*)\\)$/, '');\n\n    result.push({\n      value: coreValue,\n      label,\n      author,\n      specialNote: config.note,\n      available: existingCoreValues.has(coreValue),\n    });\n    count++;\n  }\n\n  return result;\n}\n\n/**\n * 获取指定tab下的核心列表\n * 核心可以同时属于多个tab\n */\nexport function getCoresForTab(coreOptions: CoreOption[], tab: string): CoreOption[] {\n  return coreOptions.filter(core => core.tabs.includes(tab));\n}\n\n/**\n * 获取当前选中的核心\n */\nexport function getSelectedCore(localCoreSelections: Map<string, boolean>): string | null {\n  for (const [name, enabled] of localCoreSelections) {\n    if (enabled) return name;\n  }\n  return null;\n}\n\n/**\n * 加载核心列表\n * @param specialRecommendCores 特别推荐核心列表（从外部传入）\n */\nexport async function loadCoreOptions(\n  specialRecommendCores: Record<string, SpecialRecommendConfig> = {},\n): Promise<{\n  coreOptions: CoreOption[];\n  localCoreSelections: Map<string, boolean>;\n  tabs: string[];\n  activeTab: string;\n  bookName: string | null;\n  specialRecommendCoreList: SpecialRecommendCore[];\n}> {\n  // 动态获取tabs（需要先加载核心分类数据）\n  const tabs = await getTabsFromRankings();\n  const bookName = getWorldBookName();\n  const entries = await getFilteredEntries(CORE_PATTERN, bookName);\n\n  // 构建存在的核心值集合\n  const existingCoreValues = new Set(entries.map((entry: { name: string }) => entry.name));\n\n  // 生成特别推荐核心列表（包含可用性信息，最多3个）\n  const specialRecommendCoreList = generateSpecialRecommendCores(\n    specialRecommendCores,\n    existingCoreValues,\n  );\n\n  // 创建可用的特别推荐核心值集合（用于后续判断）\n  const availableSpecialCores = new Set(\n    specialRecommendCoreList.filter(core => core.available).map(core => core.value),\n  );\n\n  const coreOptions = entries.map((entry: { name: string; enabled: boolean }) => {\n    // 去掉\"命定系统-\"前缀\n    const nameWithoutPrefix = entry.name.replace(CORE_PATTERN, '');\n    // 提取作者信息（括号内容）\n    const authorMatch = nameWithoutPrefix.match(AUTHOR_PATTERN);\n    const author = authorMatch ? authorMatch[1] : '';\n    // 去掉末尾括号内容作为显示标签\n    const label = nameWithoutPrefix.replace(AUTHOR_PATTERN, '');\n    const ranking = getCoreRanking(label, tabs);\n\n    // 独立处理特别推荐：检查核心是否在可用的特别推荐列表中\n    const coreTabs = [...ranking.tabs];\n    let specialNote = '';\n    if (availableSpecialCores.has(entry.name)) {\n      coreTabs.unshift(SPECIAL_RECOMMEND_TAB); // 特别推荐放在最前面\n      const recommendCore = specialRecommendCoreList.find(c => c.value === entry.name);\n      specialNote = recommendCore?.specialNote || '';\n    }\n\n    return {\n      value: entry.name,\n      label,\n      author,\n      enabled: entry.enabled,\n      tabs: coreTabs,\n      note: ranking.note,\n      specialNote,\n    };\n  });\n\n  // 初始化本地选择列表（从世界书的原始状态复制）\n  const localCoreSelections = new Map(coreOptions.map(core => [core.value, core.enabled]));\n\n  // 固定显示第一个tab（特别推荐），取消自动切换到已启用核心的tab\n  const activeTab = tabs[0] || SPECIAL_RECOMMEND_TAB;\n\n  return {\n    coreOptions,\n    localCoreSelections,\n    tabs,\n    activeTab,\n    bookName,\n    specialRecommendCoreList,\n  };\n}\n\n/**\n * 选择核心（仅更新本地状态，返回新的选择Map）\n */\nexport function selectCore(\n  localCoreSelections: Map<string, boolean>,\n  coreValue: string,\n): Map<string, boolean> {\n  const currentSelected = getSelectedCore(localCoreSelections);\n  if (currentSelected === coreValue) {\n    return localCoreSelections; // 已选中，无需操作\n  }\n\n  // 创建新的Map，禁用其他核心，启用选中的核心\n  const newSelections = new Map<string, boolean>();\n  for (const [name] of localCoreSelections) {\n    newSelections.set(name, name === coreValue);\n  }\n  return newSelections;\n}\n\n/**\n * 检查本地选择是否与原始状态有变化\n */\nexport function hasChanges(\n  coreOptions: CoreOption[],\n  localCoreSelections: Map<string, boolean>,\n): boolean {\n  for (const core of coreOptions) {\n    const localEnabled = localCoreSelections.get(core.value) ?? false;\n    if (localEnabled !== core.enabled) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * 保存核心选择到世界书\n * @param coreOptions 核心选项列表\n * @param localCoreSelections 本地选择状态\n * @param bookName 世界书名称\n * @returns 更新后的核心选项列表\n */\nexport async function saveChanges(\n  coreOptions: CoreOption[],\n  localCoreSelections: Map<string, boolean>,\n  bookName: string,\n): Promise<CoreOption[]> {\n  if (!hasChanges(coreOptions, localCoreSelections)) {\n    return coreOptions;\n  }\n\n  // 构建更新列表\n  const updatedEntries = Array.from(localCoreSelections).map(([name, enabled]) => ({\n    name,\n    enabled,\n  }));\n\n  await updateWorldBook(updatedEntries, bookName);\n\n  // 返回更新后的核心选项列表\n  return coreOptions.map(core => ({\n    ...core,\n    enabled: localCoreSelections.get(core.value) ?? false,\n  }));\n}\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, unref as _unref, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createTextVNode as _createTextVNode, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = { class: \"core-page\" };\nconst _hoisted_2 = { class: \"control-panel-container\" };\nconst _hoisted_3 = { class: \"tab-navigation\" };\nconst _hoisted_4 = [\"disabled\"];\nconst _hoisted_5 = { class: \"tab-buttons-container\" };\nconst _hoisted_6 = [\"onClick\"];\nconst _hoisted_7 = { class: \"tab-label\" };\nconst _hoisted_8 = {\n    key: 0,\n    class: \"tab-count\"\n};\nconst _hoisted_9 = [\"disabled\"];\nconst _hoisted_10 = [\"disabled\"];\nconst _hoisted_11 = { class: \"tab-content\" };\nconst _hoisted_12 = { class: \"control-group\" };\nconst _hoisted_13 = {\n    key: 0,\n    class: \"loading-text\"\n};\nconst _hoisted_14 = {\n    key: 1,\n    class: \"empty-text\"\n};\nconst _hoisted_15 = { class: \"special-recommend-container\" };\nconst _hoisted_16 = { class: \"special-recommend-cards\" };\nconst _hoisted_17 = [\"onClick\"];\nconst _hoisted_18 = {\n    key: 0,\n    class: \"card-overlay\"\n};\nconst _hoisted_19 = { class: \"card-content\" };\nconst _hoisted_20 = { class: \"card-label\" };\nconst _hoisted_21 = {\n    key: 0,\n    class: \"card-author\"\n};\nconst _hoisted_22 = { class: \"card-note\" };\nconst _hoisted_23 = { class: \"control-buttons\" };\nconst _hoisted_24 = [\"onClick\"];\nconst _hoisted_25 = {\n    key: 0,\n    class: \"core-author\"\n};\nconst _hoisted_26 = {\n    key: 1,\n    class: \"core-note\"\n};\nconst _hoisted_27 = { class: \"step-footer\" };\nconst _hoisted_28 = [\"disabled\"];\nconst _hoisted_29 = [\"disabled\"];\nimport { computed, onMounted, ref, watch } from 'vue';\nimport { getCoresForTab as getCoresForTabService, getSelectedCore, initialCoreState, loadCoreOptions as loadCoreOptionsService, loadSpecialRecommendCores, saveChanges as saveChangesService, selectCore, SPECIAL_RECOMMEND_TAB, } from '../services/CorePage';\nconst maxVisibleTabs = 4;\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'CorePage',\n    emits: [\"prev\", \"next\"],\n    setup(__props, { emit: __emit }) {\n        const emit = __emit;\n        const isLoading = ref(false);\n        const isSaving = ref(false);\n        const tabs = ref([...initialCoreState.tabs]);\n        const activeTab = ref(initialCoreState.activeTab);\n        const coreOptions = ref([...initialCoreState.coreOptions]);\n        const localCoreSelections = ref(new Map(initialCoreState.localCoreSelections));\n        const bookName = ref(null);\n        const specialRecommendCoreList = ref([]);\n        // Tab 分页相关\n        const tabStartIndex = ref(0);\n        const selectedCore = computed(() => getSelectedCore(localCoreSelections.value));\n        // 当前是否在特别推荐tab\n        const isSpecialRecommendTab = computed(() => activeTab.value === SPECIAL_RECOMMEND_TAB);\n        // 是否显示箭头\n        const showArrows = computed(() => tabs.value.length > maxVisibleTabs);\n        // 当前可见的 tabs\n        const visibleTabs = computed(() => {\n            if (!showArrows.value) {\n                return tabs.value;\n            }\n            return tabs.value.slice(tabStartIndex.value, tabStartIndex.value + maxVisibleTabs);\n        });\n        // 切换到上一批 tabs\n        function handlePrevTabs() {\n            if (tabStartIndex.value > 0) {\n                tabStartIndex.value = Math.max(0, tabStartIndex.value - maxVisibleTabs);\n            }\n        }\n        // 切换到下一批 tabs\n        function handleNextTabs() {\n            if (tabStartIndex.value + maxVisibleTabs < tabs.value.length) {\n                tabStartIndex.value = Math.min(tabs.value.length - maxVisibleTabs, tabStartIndex.value + maxVisibleTabs);\n            }\n        }\n        // 当 activeTab 改变时，确保它在可见范围内\n        watch(activeTab, newTab => {\n            const tabIndex = tabs.value.indexOf(newTab);\n            if (tabIndex !== -1 && showArrows.value) {\n                if (tabIndex < tabStartIndex.value) {\n                    tabStartIndex.value = tabIndex;\n                }\n                else if (tabIndex >= tabStartIndex.value + maxVisibleTabs) {\n                    tabStartIndex.value = tabIndex - maxVisibleTabs + 1;\n                }\n            }\n        });\n        function getCoresForTab(tab) {\n            return getCoresForTabService(coreOptions.value, tab);\n        }\n        async function loadCoreOptions() {\n            isLoading.value = true;\n            try {\n                // 从远程加载特别推荐核心数据\n                const specialRecommendCoresData = await loadSpecialRecommendCores();\n                const result = await loadCoreOptionsService(specialRecommendCoresData);\n                tabs.value = result.tabs;\n                coreOptions.value = result.coreOptions;\n                localCoreSelections.value = result.localCoreSelections;\n                activeTab.value = result.activeTab;\n                bookName.value = result.bookName;\n                specialRecommendCoreList.value = result.specialRecommendCoreList;\n            }\n            catch (error) {\n                console.error('加载核心列表失败:', error);\n                tabs.value = [];\n                coreOptions.value = [];\n                localCoreSelections.value = new Map();\n                bookName.value = null;\n                specialRecommendCoreList.value = [];\n            }\n            finally {\n                isLoading.value = false;\n            }\n        }\n        async function handleRefresh() {\n            await loadCoreOptions();\n        }\n        function handleSelectCore(coreValue) {\n            localCoreSelections.value = selectCore(localCoreSelections.value, coreValue);\n        }\n        /**\n         * 点击下一步：根据本地列表更新世界书后跳转\n         */\n        async function handleNext() {\n            isSaving.value = true;\n            try {\n                if (bookName.value) {\n                    coreOptions.value = await saveChangesService(coreOptions.value, localCoreSelections.value, bookName.value);\n                }\n            }\n            catch (error) {\n                console.error('保存核心选择失败:', error);\n            }\n            finally {\n                isSaving.value = false;\n            }\n            emit('next');\n        }\n        // 组件挂载时加载核心列表\n        onMounted(() => {\n            loadCoreOptions();\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _cache[5] || (_cache[5] = _createElementVNode(\"h2\", { class: \"main-title\" }, \"核心选择\", -1 /* CACHED */)),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createCommentVNode(\" Tab 导航 \"),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        (showArrows.value)\n                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                key: 0,\n                                class: \"arrow-button\",\n                                disabled: tabStartIndex.value === 0,\n                                title: \"上一页\",\n                                onClick: handlePrevTabs\n                            }, [...(_cache[1] || (_cache[1] = [\n                                    _createElementVNode(\"span\", null, \"‹\", -1 /* CACHED */)\n                                ]))], 8 /* PROPS */, _hoisted_4))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createElementVNode(\"div\", _hoisted_5, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(visibleTabs.value, (tab) => {\n                                return (_openBlock(), _createElementBlock(\"button\", {\n                                    key: tab,\n                                    class: _normalizeClass([\"tab-button\", {\n                                            active: activeTab.value === tab,\n                                            'special-recommend-tab': tab === _unref(SPECIAL_RECOMMEND_TAB),\n                                        }]),\n                                    onClick: ($event) => (activeTab.value = tab)\n                                }, [\n                                    _createElementVNode(\"span\", _hoisted_7, _toDisplayString(tab), 1 /* TEXT */),\n                                    (tab !== _unref(SPECIAL_RECOMMEND_TAB))\n                                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_8, \"(\" + _toDisplayString(getCoresForTab(tab).length) + \")\", 1 /* TEXT */))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ], 10 /* CLASS, PROPS */, _hoisted_6));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ]),\n                        (showArrows.value)\n                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                key: 1,\n                                class: \"arrow-button\",\n                                disabled: tabStartIndex.value + maxVisibleTabs >= tabs.value.length,\n                                title: \"下一页\",\n                                onClick: handleNextTabs\n                            }, [...(_cache[2] || (_cache[2] = [\n                                    _createElementVNode(\"span\", null, \"›\", -1 /* CACHED */)\n                                ]))], 8 /* PROPS */, _hoisted_9))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createElementVNode(\"button\", {\n                            class: \"refresh-button\",\n                            disabled: isLoading.value,\n                            title: \"刷新核心列表\",\n                            onClick: handleRefresh\n                        }, [\n                            _createElementVNode(\"span\", {\n                                class: _normalizeClass({ 'is-spinning': isLoading.value })\n                            }, \"⟳\", 2 /* CLASS */)\n                        ], 8 /* PROPS */, _hoisted_10)\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_11, [\n                        _createElementVNode(\"div\", _hoisted_12, [\n                            (isLoading.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, \"正在加载核心列表...\"))\n                                : (coreOptions.value.length === 0)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, \"未找到可用的核心\"))\n                                    : (isSpecialRecommendTab.value)\n                                        ? (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                                            _createCommentVNode(\" 特别推荐显示 - 特殊卡片布局 \"),\n                                            _createElementVNode(\"div\", _hoisted_15, [\n                                                _cache[3] || (_cache[3] = _createStaticVNode(\"<div class=\\\"recommend-hero-section\\\" data-v-955173c2><div class=\\\"hero-icon\\\" data-v-955173c2>✦</div><div class=\\\"hero-content\\\" data-v-955173c2><h3 class=\\\"hero-title\\\" data-v-955173c2>本周精选</h3><p class=\\\"hero-subtitle\\\" data-v-955173c2>由<s data-v-955173c2>社区</s>与编辑共同甄选的优质(?)核心</p></div><div class=\\\"hero-divider\\\" data-v-955173c2></div></div>\", 1)),\n                                                _createElementVNode(\"div\", _hoisted_16, [\n                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(specialRecommendCoreList.value, (recommendCore) => {\n                                                        return (_openBlock(), _createElementBlock(\"div\", {\n                                                            key: recommendCore.value,\n                                                            class: _normalizeClass([\"special-recommend-card\", {\n                                                                    unavailable: !recommendCore.available,\n                                                                    selected: selectedCore.value === recommendCore.value,\n                                                                }]),\n                                                            onClick: ($event) => (recommendCore.available && handleSelectCore(recommendCore.value))\n                                                        }, [\n                                                            (!recommendCore.available)\n                                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_18))\n                                                                : _createCommentVNode(\"v-if\", true),\n                                                            _createElementVNode(\"div\", _hoisted_19, [\n                                                                _createElementVNode(\"div\", _hoisted_20, _toDisplayString(recommendCore.label), 1 /* TEXT */),\n                                                                (recommendCore.author)\n                                                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_21, _toDisplayString(recommendCore.author), 1 /* TEXT */))\n                                                                    : _createCommentVNode(\"v-if\", true),\n                                                                _createElementVNode(\"div\", _hoisted_22, [\n                                                                    (!recommendCore.available)\n                                                                        ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                                                            _createTextVNode(\"不可用\")\n                                                                        ], 64 /* STABLE_FRAGMENT */))\n                                                                        : (recommendCore.specialNote)\n                                                                            ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                                                                _createTextVNode(_toDisplayString(recommendCore.specialNote), 1 /* TEXT */)\n                                                                            ], 64 /* STABLE_FRAGMENT */))\n                                                                            : _createCommentVNode(\"v-if\", true)\n                                                                ])\n                                                            ])\n                                                        ], 10 /* CLASS, PROPS */, _hoisted_17));\n                                                    }), 128 /* KEYED_FRAGMENT */))\n                                                ])\n                                            ])\n                                        ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                        : (_openBlock(), _createElementBlock(_Fragment, { key: 3 }, [\n                                            _createCommentVNode(\" 普通核心显示 \"),\n                                            _createElementVNode(\"div\", _hoisted_23, [\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(getCoresForTab(activeTab.value), (core) => {\n                                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                                        key: core.value,\n                                                        class: \"control-item-wrapper\"\n                                                    }, [\n                                                        _createElementVNode(\"button\", {\n                                                            class: _normalizeClass([\"control-button\", { selected: selectedCore.value === core.value }]),\n                                                            onClick: ($event) => (handleSelectCore(core.value))\n                                                        }, _toDisplayString(core.label), 11 /* TEXT, CLASS, PROPS */, _hoisted_24),\n                                                        (core.author)\n                                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_25, _toDisplayString(core.author), 1 /* TEXT */))\n                                                            : _createCommentVNode(\"v-if\", true),\n                                                        (core.note)\n                                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_26, _toDisplayString(core.note), 1 /* TEXT */))\n                                                            : _createCommentVNode(\"v-if\", true)\n                                                    ]));\n                                                }), 128 /* KEYED_FRAGMENT */))\n                                            ])\n                                        ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                        ])\n                    ])\n                ]),\n                _createElementVNode(\"div\", _hoisted_27, [\n                    _createElementVNode(\"button\", {\n                        class: \"nav-button\",\n                        disabled: isSaving.value,\n                        onClick: _cache[0] || (_cache[0] = ($event) => (_ctx.$emit('prev')))\n                    }, [...(_cache[4] || (_cache[4] = [\n                            _createElementVNode(\"span\", null, \"上一步\", -1 /* CACHED */)\n                        ]))], 8 /* PROPS */, _hoisted_28),\n                    _createElementVNode(\"button\", {\n                        class: \"nav-button\",\n                        disabled: !selectedCore.value || isLoading.value || isSaving.value,\n                        onClick: handleNext\n                    }, [\n                        _createElementVNode(\"span\", null, _toDisplayString(isSaving.value ? '保存中...' : '下一步'), 1 /* TEXT */)\n                    ], 8 /* PROPS */, _hoisted_29)\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./CorePage.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CorePage.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./CorePage.vue?vue&type=style&index=0&id=955173c2&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_@vue+compiler-sfc@3.5.29_vue@3.5.29_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-955173c2\"]])\n\nexport default __exports__","import { getFilteredEntries, getWorldBookName, updateWorldBook } from './worldbookload&update';\n\n// ========================\n// 类型定义\n// ========================\n\n/** DLC 类别 */\nexport type DLCCategory = '角色' | '事件' | '扩展';\n\n/** 单个世界书条目 */\nexport interface DLCEntry {\n  name: string;\n  enabled: boolean;\n}\n\n/** 分组后的 DLC 选项（统一模型） */\nexport interface DLCOption {\n  /** 唯一标识，如 \"[DLC][角色][薇薇拉]\" */\n  groupKey: string;\n  /** DLC 类别 */\n  category: DLCCategory;\n  /** 显示名称，如 \"薇薇拉\" */\n  label: string;\n  /** 作者 */\n  author: string;\n  /** 其他信息 */\n  info: string;\n  /** 互斥目标数组 - [!xxx] 格式，开启时关闭包含 [xxx] 的 DLC */\n  exclusionTargets: string[];\n  /** 替换目标数组 - [>xxx] 格式，开启时禁用包含 [xxx] 的条目，关闭时恢复 */\n  replacementTargets: string[];\n  /** 前置需求数组 - [<xxx] 格式，需要 [xxx] DLC 处于开启状态 */\n  prerequisiteTargets: string[];\n  /** 该 DLC 下的所有条目 */\n  entries: DLCEntry[];\n  /** 是否启用（所有条目启用时为 true） */\n  enabled: boolean;\n}\n\n/** 切换 DLC 的结果 */\nexport interface ToggleDLCResult {\n  selections: Map<string, boolean>;\n  success: boolean;\n  error?: string;\n  missingPrerequisites?: string[];\n}\n\n// ========================\n// 初始状态\n// ========================\n\nexport const initialDLCState = {\n  dlcOptions: [] as DLCOption[],\n  localSelections: new Map<string, boolean>(),\n};\n\n// ========================\n// 正则模式\n// ========================\n\n/** 匹配所有 DLC 条目 */\nconst DLC_PATTERN = /^\\[DLC\\]/;\n\n/** 提取 groupKey: [DLC][类别][名称] */\nconst DLC_GROUP_KEY_PATTERN = /^(\\[DLC\\]\\[[^\\]]+\\]\\[[^\\]]+\\])/;\n\n/** 提取类别（第二个方括号内容） */\nconst DLC_CATEGORY_PATTERN = /^\\[DLC\\]\\[([^\\]]+)\\]/;\n\n/** 提取显示名称（第三个方括号内容） */\nconst DLC_LABEL_PATTERN = /^\\[DLC\\]\\[[^\\]]+\\]\\[([^\\]]+)\\]/;\n\n/** 互斥目标 [!xxx] */\nconst EXCLUSION_PATTERN = /\\[!([^\\]]+)\\]/g;\n\n/** 替换目标 [>xxx] */\nconst REPLACEMENT_PATTERN = /\\[>([^\\]]+)\\]/g;\n\n/** 前置需求 [<xxx] */\nconst PREREQUISITE_PATTERN = /\\[<([^\\]]+)\\]/g;\n\n/** 作者信息 - 匹配最后一个 \"(xxx)\" */\nconst AUTHOR_PATTERN = /\\(([^)]+)\\)(?=[^()]*$)/;\n\n// ========================\n// 工具函数\n// ========================\n\n/**\n * 按拼音首字母排序比较函数\n */\nfunction pinyinCompare(a: string, b: string): number {\n  return a.localeCompare(b, 'zh-CN', { sensitivity: 'base' });\n}\n\n/**\n * 对 DLC 选项进行排序（按 label 的拼音首字母排序）\n */\nexport function sortDLCOptions(options: DLCOption[]): DLCOption[] {\n  return [...options].sort((a, b) => pinyinCompare(a.label, b.label));\n}\n\n/**\n * 转义正则表达式特殊字符\n */\nfunction escapeRegExp(string: string): string {\n  return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\n\n// ========================\n// 解析函数\n// ========================\n\n/**\n * 从条目名称中提取 groupKey\n * @param entryName 如 \"[DLC][角色][薇薇拉][!xxx]薇薇拉-本体(K1nn)\"\n * @returns 如 \"[DLC][角色][薇薇拉]\"，不匹配则返回 null\n */\nfunction extractGroupKey(entryName: string): string | null {\n  const match = entryName.match(DLC_GROUP_KEY_PATTERN);\n  return match ? match[1] : null;\n}\n\n/**\n * 从 groupKey 中提取类别\n * @param groupKey 如 \"[DLC][角色][薇薇拉]\"\n * @returns 如 \"角色\"\n */\nfunction extractCategory(groupKey: string): DLCCategory | null {\n  const match = groupKey.match(DLC_CATEGORY_PATTERN);\n  if (!match) return null;\n  const cat = match[1];\n  if (cat === '角色' || cat === '事件' || cat === '扩展') {\n    return cat;\n  }\n  return null;\n}\n\n/**\n * 从 groupKey 中提取显示名称\n * @param groupKey 如 \"[DLC][角色][薇薇拉]\"\n * @returns 如 \"薇薇拉\"\n */\nfunction extractLabel(groupKey: string): string {\n  const match = groupKey.match(DLC_LABEL_PATTERN);\n  return match ? match[1] : groupKey;\n}\n\n/**\n * 使用正则全局匹配提取目标数组\n */\nfunction extractTargetsWithPattern(text: string, pattern: RegExp): string[] {\n  const targets: string[] = [];\n  const regex = new RegExp(pattern.source, 'g');\n  let match;\n  while ((match = regex.exec(text)) !== null) {\n    targets.push(match[1]);\n  }\n  return targets;\n}\n\n/**\n * 从条目数组中合并提取所有目标（去重）\n */\nfunction extractMergedTargets(entries: DLCEntry[], pattern: RegExp): string[] {\n  const allTargets = new Set<string>();\n  for (const entry of entries) {\n    const targets = extractTargetsWithPattern(entry.name, pattern);\n    targets.forEach(t => allTargets.add(t));\n  }\n  return Array.from(allTargets);\n}\n\n/**\n * 从条目数组中提取作者和信息\n * @param entries DLC 下的所有条目\n * @returns { author, info }\n */\nfunction extractAuthorInfo(entries: DLCEntry[]): { author: string; info: string } {\n  for (const entry of entries) {\n    const match = entry.name.match(AUTHOR_PATTERN);\n    if (match) {\n      const authorInfo = match[1].trim();\n      const dashIndex = authorInfo.indexOf('-');\n      if (dashIndex > 0) {\n        return {\n          author: authorInfo.substring(0, dashIndex).trim(),\n          info: authorInfo.substring(dashIndex + 1).trim(),\n        };\n      }\n      return { author: authorInfo, info: '' };\n    }\n  }\n  return { author: '', info: '' };\n}\n\n// ========================\n// 加载\n// ========================\n\n/**\n * 加载所有 DLC 选项\n */\nexport async function loadDLCOptions(): Promise<{\n  dlcOptions: DLCOption[];\n  localSelections: Map<string, boolean>;\n  bookName: string | null;\n}> {\n  const bookName = getWorldBookName();\n  const entries = await getFilteredEntries(DLC_PATTERN, bookName);\n\n  // 按 groupKey 分组条目\n  const groups = new Map<string, DLCEntry[]>();\n\n  for (const entry of entries as { name: string; enabled: boolean }[]) {\n    const groupKey = extractGroupKey(entry.name);\n    if (!groupKey) continue;\n\n    if (!groups.has(groupKey)) {\n      groups.set(groupKey, []);\n    }\n    groups.get(groupKey)!.push({\n      name: entry.name,\n      enabled: entry.enabled,\n    });\n  }\n\n  // 构建 DLC 选项列表\n  const dlcOptions: DLCOption[] = [];\n  for (const [groupKey, groupEntries] of groups) {\n    const category = extractCategory(groupKey);\n    if (!category) continue;\n\n    const allEnabled = groupEntries.every(e => e.enabled);\n    const { author, info } = extractAuthorInfo(groupEntries);\n\n    dlcOptions.push({\n      groupKey,\n      category,\n      label: extractLabel(groupKey),\n      author,\n      info,\n      exclusionTargets: extractMergedTargets(groupEntries, EXCLUSION_PATTERN),\n      replacementTargets: extractMergedTargets(groupEntries, REPLACEMENT_PATTERN),\n      prerequisiteTargets: extractMergedTargets(groupEntries, PREREQUISITE_PATTERN),\n      entries: groupEntries,\n      enabled: allEnabled,\n    });\n  }\n\n  // 排序\n  const sortedOptions = sortDLCOptions(dlcOptions);\n\n  // 初始化本地选择列表\n  const localSelections = new Map(sortedOptions.map(opt => [opt.groupKey, opt.enabled]));\n\n  return { dlcOptions: sortedOptions, localSelections, bookName };\n}\n\n// ========================\n// 切换\n// ========================\n\n/**\n * 检查前置需求是否满足（跨类别查找）\n */\nfunction checkPrerequisites(\n  dlcOptions: DLCOption[],\n  localSelections: Map<string, boolean>,\n  prerequisiteTargets: string[],\n): { satisfied: boolean; missingPrerequisites: string[] } {\n  const missingPrerequisites: string[] = [];\n\n  for (const target of prerequisiteTargets) {\n    // 跨所有类别查找包含 [target] 的 DLC\n    const prerequisiteDLC = dlcOptions.find(opt => opt.groupKey.includes(`[${target}]`));\n    if (prerequisiteDLC) {\n      const isEnabled = localSelections.get(prerequisiteDLC.groupKey) ?? false;\n      if (!isEnabled) {\n        missingPrerequisites.push(target);\n      }\n    } else {\n      missingPrerequisites.push(target);\n    }\n  }\n\n  return {\n    satisfied: missingPrerequisites.length === 0,\n    missingPrerequisites,\n  };\n}\n\n/**\n * 切换 DLC 启用状态（统一处理所有类别的互斥/前置/级联逻辑）\n *\n * 处理三种关系（跨类别生效）：\n * 1. 互斥 [!xxx]：开启时关闭包含 [xxx] 的 DLC\n * 2. 替换 [>xxx]：开启时关闭包含 [xxx] 的条目（保存时处理）\n * 3. 前置需求 [<xxx]：开启时检查 [xxx] DLC 是否已开启\n */\nexport function toggleDLC(\n  localSelections: Map<string, boolean>,\n  dlcOptions: DLCOption[],\n  groupKey: string,\n): ToggleDLCResult {\n  const newSelections = new Map(localSelections);\n  const currentEnabled = newSelections.get(groupKey) ?? false;\n  const newEnabled = !currentEnabled;\n\n  const targetDLC = dlcOptions.find(opt => opt.groupKey === groupKey);\n\n  // 启用时检查前置需求\n  if (newEnabled && targetDLC) {\n    if (targetDLC.prerequisiteTargets.length > 0) {\n      const { satisfied, missingPrerequisites } = checkPrerequisites(\n        dlcOptions,\n        newSelections,\n        targetDLC.prerequisiteTargets,\n      );\n\n      if (!satisfied) {\n        return {\n          selections: localSelections,\n          success: false,\n          error: `缺少前置需求: ${missingPrerequisites.join(', ')}`,\n          missingPrerequisites,\n        };\n      }\n    }\n  }\n\n  newSelections.set(groupKey, newEnabled);\n\n  // 启用时处理互斥逻辑（跨类别）\n  if (newEnabled && targetDLC) {\n    for (const exclusionTarget of targetDLC.exclusionTargets) {\n      for (const opt of dlcOptions) {\n        if (\n          opt.groupKey !== groupKey &&\n          (opt.label === exclusionTarget || opt.groupKey.includes(`[${exclusionTarget}]`))\n        ) {\n          newSelections.set(opt.groupKey, false);\n        }\n      }\n    }\n  }\n\n  // 禁用时级联禁用依赖此 DLC 的其他 DLC（跨类别）\n  if (!newEnabled && targetDLC) {\n    for (const opt of dlcOptions) {\n      if (opt.groupKey !== groupKey) {\n        const isEnabled = newSelections.get(opt.groupKey) ?? false;\n        if (isEnabled && opt.prerequisiteTargets.includes(targetDLC.label)) {\n          newSelections.set(opt.groupKey, false);\n        }\n      }\n    }\n  }\n\n  return {\n    selections: newSelections,\n    success: true,\n  };\n}\n\n// ========================\n// 变更检测\n// ========================\n\n/**\n * 检查本地选择是否与原始状态有变化\n */\nexport function hasDLCChanges(\n  dlcOptions: DLCOption[],\n  localSelections: Map<string, boolean>,\n): boolean {\n  for (const opt of dlcOptions) {\n    const localEnabled = localSelections.get(opt.groupKey) ?? false;\n    if (localEnabled !== opt.enabled) {\n      return true;\n    }\n  }\n  return false;\n}\n\n// ========================\n// 保存\n// ========================\n\n/**\n * 收集所有被启用 DLC 的互斥目标\n */\nfunction collectExclusionTargetsToDisable(\n  dlcOptions: DLCOption[],\n  localSelections: Map<string, boolean>,\n): string[] {\n  const targets: string[] = [];\n  for (const opt of dlcOptions) {\n    const isEnabled = localSelections.get(opt.groupKey) ?? false;\n    if (isEnabled && opt.exclusionTargets.length > 0) {\n      targets.push(...opt.exclusionTargets);\n    }\n  }\n  return [...new Set(targets)];\n}\n\n/**\n * 收集所有被启用 DLC 的替换目标\n */\nfunction collectReplacementTargetsToDisable(\n  dlcOptions: DLCOption[],\n  localSelections: Map<string, boolean>,\n): string[] {\n  const targets: string[] = [];\n  for (const opt of dlcOptions) {\n    const isEnabled = localSelections.get(opt.groupKey) ?? false;\n    if (isEnabled && opt.replacementTargets.length > 0) {\n      targets.push(...opt.replacementTargets);\n    }\n  }\n  return [...new Set(targets)];\n}\n\n/**\n * 收集所有从启用变为禁用的 DLC 的替换目标（需要恢复启用）\n */\nfunction collectReplacementTargetsToEnable(\n  dlcOptions: DLCOption[],\n  localSelections: Map<string, boolean>,\n  originalStates: Map<string, boolean>,\n): string[] {\n  const targets: string[] = [];\n  for (const opt of dlcOptions) {\n    const isEnabled = localSelections.get(opt.groupKey) ?? false;\n    const wasEnabled = originalStates.get(opt.groupKey) ?? false;\n    if (!isEnabled && wasEnabled && opt.replacementTargets.length > 0) {\n      targets.push(...opt.replacementTargets);\n    }\n  }\n  return [...new Set(targets)];\n}\n\n/**\n * 保存 DLC 选择到世界书（统一保存，一次 updateWorldBook 调用）\n * @returns 更新后的 DLC 选项列表\n */\nexport async function saveDLCChanges(\n  dlcOptions: DLCOption[],\n  localSelections: Map<string, boolean>,\n  bookName: string,\n): Promise<DLCOption[]> {\n  if (!hasDLCChanges(dlcOptions, localSelections)) {\n    return dlcOptions;\n  }\n\n  // 构建原始状态映射\n  const originalStates = new Map(dlcOptions.map(opt => [opt.groupKey, opt.enabled]));\n\n  // 构建更新列表：将每个 DLC 的所有条目设置为相同的启用状态\n  const updatedEntries: Array<{ name: string; enabled: boolean }> = [];\n\n  for (const opt of dlcOptions) {\n    const newEnabled = localSelections.get(opt.groupKey) ?? false;\n    for (const entry of opt.entries) {\n      updatedEntries.push({\n        name: entry.name,\n        enabled: newEnabled,\n      });\n    }\n  }\n\n  // 收集互斥目标（需要禁用）\n  const exclusionTargetsToDisable = collectExclusionTargetsToDisable(dlcOptions, localSelections);\n\n  // 收集替换目标（需要禁用）\n  const replacementTargetsToDisable = collectReplacementTargetsToDisable(\n    dlcOptions,\n    localSelections,\n  );\n\n  // 收集替换目标（需要恢复启用）\n  const replacementTargetsToEnable = collectReplacementTargetsToEnable(\n    dlcOptions,\n    localSelections,\n    originalStates,\n  );\n\n  // 从需要启用的替换目标中排除需要禁用的目标（禁用优先级更高）\n  const filteredReplacementTargetsToEnable = replacementTargetsToEnable.filter(\n    target =>\n      !replacementTargetsToDisable.includes(target) && !exclusionTargetsToDisable.includes(target),\n  );\n\n  // 处理互斥逻辑：禁用包含 [互斥目标] 的条目\n  if (exclusionTargetsToDisable.length > 0) {\n    for (const target of exclusionTargetsToDisable) {\n      const pattern = new RegExp(`\\\\[${escapeRegExp(target)}\\\\]`);\n      const matchingEntries = await getFilteredEntries(pattern, bookName);\n\n      for (const entry of matchingEntries as { name: string; enabled: boolean }[]) {\n        const existingIndex = updatedEntries.findIndex(e => e.name === entry.name);\n        if (existingIndex === -1) {\n          updatedEntries.push({ name: entry.name, enabled: false });\n        } else {\n          updatedEntries[existingIndex].enabled = false;\n        }\n      }\n    }\n  }\n\n  // 处理替换逻辑（禁用）：禁用包含 [替换目标] 的条目\n  if (replacementTargetsToDisable.length > 0) {\n    for (const target of replacementTargetsToDisable) {\n      const pattern = new RegExp(`\\\\[${escapeRegExp(target)}\\\\]`);\n      const matchingEntries = await getFilteredEntries(pattern, bookName);\n\n      for (const entry of matchingEntries as { name: string; enabled: boolean }[]) {\n        const existingIndex = updatedEntries.findIndex(e => e.name === entry.name);\n        if (existingIndex === -1) {\n          updatedEntries.push({ name: entry.name, enabled: false });\n        } else {\n          updatedEntries[existingIndex].enabled = false;\n        }\n      }\n    }\n  }\n\n  // 处理替换逻辑（恢复启用）：启用包含 [替换目标] 的条目\n  if (filteredReplacementTargetsToEnable.length > 0) {\n    for (const target of filteredReplacementTargetsToEnable) {\n      const pattern = new RegExp(`\\\\[${escapeRegExp(target)}\\\\]`);\n      const matchingEntries = await getFilteredEntries(pattern, bookName);\n\n      for (const entry of matchingEntries as { name: string; enabled: boolean }[]) {\n        const existingIndex = updatedEntries.findIndex(e => e.name === entry.name);\n        if (existingIndex === -1) {\n          updatedEntries.push({ name: entry.name, enabled: true });\n        } else if (updatedEntries[existingIndex].enabled !== false) {\n          // 禁用优先级更高，不覆盖已禁用的条目\n          updatedEntries[existingIndex].enabled = true;\n        }\n      }\n    }\n  }\n\n  await updateWorldBook(updatedEntries, bookName);\n\n  // 返回更新后的 DLC 选项列表\n  return dlcOptions.map(opt => {\n    const newEnabled = localSelections.get(opt.groupKey) ?? false;\n    return {\n      ...opt,\n      enabled: newEnabled,\n      entries: opt.entries.map(entry => ({\n        ...entry,\n        enabled: newEnabled,\n      })),\n    };\n  });\n}\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, vModelText as _vModelText, withDirectives as _withDirectives, vShow as _vShow } from \"vue\";\nconst _hoisted_1 = { class: \"settings-page\" };\nconst _hoisted_2 = { class: \"control-panel-container\" };\nconst _hoisted_3 = { class: \"tab-navigation\" };\nconst _hoisted_4 = [\"onClick\"];\nconst _hoisted_5 = { class: \"tab-label\" };\nconst _hoisted_6 = [\"disabled\"];\nconst _hoisted_7 = { class: \"search-container\" };\nconst _hoisted_8 = { class: \"tab-content\" };\nconst _hoisted_9 = {\n    key: 0,\n    class: \"loading-text\"\n};\nconst _hoisted_10 = {\n    key: 1,\n    class: \"empty-text\"\n};\nconst _hoisted_11 = {\n    key: 2,\n    class: \"list-detail-layout\"\n};\nconst _hoisted_12 = { class: \"item-list\" };\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = { class: \"item-detail\" };\nconst _hoisted_15 = { class: \"detail-name\" };\nconst _hoisted_16 = { class: \"detail-row\" };\nconst _hoisted_17 = { class: \"detail-value\" };\nconst _hoisted_18 = { class: \"detail-row\" };\nconst _hoisted_19 = { class: \"detail-value\" };\nconst _hoisted_20 = {\n    key: 0,\n    class: \"detail-row\"\n};\nconst _hoisted_21 = { class: \"detail-value exclusion-hint\" };\nconst _hoisted_22 = {\n    key: 1,\n    class: \"detail-row\"\n};\nconst _hoisted_23 = { class: \"detail-value replacement-hint\" };\nconst _hoisted_24 = {\n    key: 2,\n    class: \"detail-row\"\n};\nconst _hoisted_25 = { class: \"detail-value prerequisite-hint\" };\nconst _hoisted_26 = { class: \"detail-row\" };\nconst _hoisted_27 = { class: \"detail-value\" };\nconst _hoisted_28 = { class: \"detail-actions\" };\nconst _hoisted_29 = {\n    key: 1,\n    class: \"detail-placeholder\"\n};\nconst _hoisted_30 = { class: \"step-footer\" };\nconst _hoisted_31 = [\"disabled\"];\nimport { computed, onMounted, ref, watch } from 'vue';\nimport { initialDLCState, loadDLCOptions as loadDLCOptionsService, saveDLCChanges as saveDLCChangesService, toggleDLC, } from '../services/DLCManagement';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'DLCManagementPage',\n    emits: [\"next\"],\n    setup(__props, { emit: __emit }) {\n        const emit = __emit;\n        // Tab 配置\n        const tabs = [\n            { key: '角色', label: '角色' },\n            { key: '事件', label: '事件' },\n            { key: '扩展', label: '扩展' },\n        ];\n        const isLoading = ref(false);\n        const isSaving = ref(false);\n        // Tab 状态\n        const activeTab = ref('角色');\n        // 搜索状态\n        const searchTerm = ref('');\n        // 选中项状态（统一）\n        const selectedItem = ref(null);\n        // DLC 统一状态\n        const dlcOptions = ref([...initialDLCState.dlcOptions]);\n        const localSelections = ref(new Map(initialDLCState.localSelections));\n        const bookName = ref(null);\n        // 计算属性：按类别过滤的选项\n        function optionsForTab(category) {\n            return dlcOptions.value.filter(opt => opt.category === category);\n        }\n        // 计算属性：按类别过滤 + 搜索过滤\n        function filteredOptionsForTab(category) {\n            const term = searchTerm.value.toLowerCase();\n            const categoryOptions = optionsForTab(category);\n            if (!term)\n                return categoryOptions;\n            return categoryOptions.filter(opt => {\n                const searchStr = `${opt.label} ${opt.author || ''} ${opt.info || ''}`.toLowerCase();\n                return searchStr.includes(term);\n            });\n        }\n        // 计算属性：获取选中项的详细信息\n        const selectedInfo = computed(() => {\n            if (!selectedItem.value)\n                return null;\n            return dlcOptions.value.find(opt => opt.groupKey === selectedItem.value) || null;\n        });\n        function switchTab(category) {\n            activeTab.value = category;\n            selectedItem.value = null;\n        }\n        async function loadAllOptions() {\n            isLoading.value = true;\n            try {\n                const result = await loadDLCOptionsService();\n                dlcOptions.value = result.dlcOptions;\n                localSelections.value = result.localSelections;\n                bookName.value = result.bookName;\n            }\n            catch (error) {\n                console.error('加载DLC数据失败:', error);\n                dlcOptions.value = [];\n                localSelections.value = new Map();\n                bookName.value = null;\n            }\n            finally {\n                isLoading.value = false;\n            }\n        }\n        async function handleRefresh() {\n            await loadAllOptions();\n        }\n        function handleToggle(groupKey) {\n            const result = toggleDLC(localSelections.value, dlcOptions.value, groupKey);\n            if (result.success) {\n                localSelections.value = result.selections;\n            }\n            else {\n                alert(result.error || '操作失败');\n            }\n        }\n        /**\n         * 点击下一步：保存所有 DLC 变更到世界书后跳转\n         */\n        async function handleNext() {\n            isSaving.value = true;\n            try {\n                if (bookName.value) {\n                    const updated = await saveDLCChangesService(dlcOptions.value, localSelections.value, bookName.value);\n                    dlcOptions.value = updated;\n                }\n            }\n            catch (error) {\n                console.error('保存DLC选择失败:', error);\n            }\n            finally {\n                isSaving.value = false;\n            }\n            emit('next');\n        }\n        // 监听 Tab 切换，清空搜索词和选中状态\n        watch(activeTab, () => {\n            searchTerm.value = '';\n            selectedItem.value = null;\n        });\n        // 组件挂载时加载所有选项\n        onMounted(() => {\n            loadAllOptions();\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _cache[9] || (_cache[9] = _createElementVNode(\"h2\", { class: \"main-title\" }, \"DLC 管理\", -1 /* CACHED */)),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createCommentVNode(\" Tab 导航 \"),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        (_openBlock(), _createElementBlock(_Fragment, null, _renderList(tabs, (tab) => {\n                            return _createElementVNode(\"button\", {\n                                key: tab.key,\n                                class: _normalizeClass([\"tab-button\", { active: activeTab.value === tab.key }]),\n                                onClick: ($event) => (switchTab(tab.key))\n                            }, [\n                                _createElementVNode(\"span\", _hoisted_5, _toDisplayString(tab.label), 1 /* TEXT */)\n                            ], 10 /* CLASS, PROPS */, _hoisted_4);\n                        }), 64 /* STABLE_FRAGMENT */)),\n                        _createElementVNode(\"button\", {\n                            class: \"refresh-button\",\n                            disabled: isLoading.value,\n                            title: \"刷新列表\",\n                            onClick: handleRefresh\n                        }, [\n                            _createElementVNode(\"span\", {\n                                class: _normalizeClass({ 'is-spinning': isLoading.value })\n                            }, \"⟳\", 2 /* CLASS */)\n                        ], 8 /* PROPS */, _hoisted_6)\n                    ]),\n                    _createCommentVNode(\" 搜索框 \"),\n                    _createElementVNode(\"div\", _hoisted_7, [\n                        _withDirectives(_createElementVNode(\"input\", {\n                            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((searchTerm).value = $event)),\n                            type: \"text\",\n                            class: \"dlc-search\",\n                            placeholder: \"🔍 搜索...\"\n                        }, null, 512 /* NEED_PATCH */), [\n                            [_vModelText, searchTerm.value]\n                        ])\n                    ]),\n                    _createCommentVNode(\" Tab 内容区域 \"),\n                    _createElementVNode(\"div\", _hoisted_8, [\n                        (_openBlock(), _createElementBlock(_Fragment, null, _renderList(tabs, (tab) => {\n                            return _withDirectives(_createElementVNode(\"div\", {\n                                key: tab.key,\n                                class: \"control-group\"\n                            }, [\n                                (isLoading.value)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, \"正在加载\" + _toDisplayString(tab.label) + \"列表...\", 1 /* TEXT */))\n                                    : (filteredOptionsForTab(tab.key).length === 0)\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, \" 未找到可用的\" + _toDisplayString(tab.label), 1 /* TEXT */))\n                                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [\n                                            _createElementVNode(\"div\", _hoisted_12, [\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(filteredOptionsForTab(tab.key), (opt) => {\n                                                    return (_openBlock(), _createElementBlock(\"button\", {\n                                                        key: opt.groupKey,\n                                                        class: _normalizeClass([\"list-item\", {\n                                                                'toggled-on': localSelections.value.get(opt.groupKey),\n                                                                selected: selectedItem.value === opt.groupKey,\n                                                            }]),\n                                                        onClick: ($event) => (selectedItem.value = opt.groupKey)\n                                                    }, _toDisplayString(opt.label), 11 /* TEXT, CLASS, PROPS */, _hoisted_13));\n                                                }), 128 /* KEYED_FRAGMENT */))\n                                            ]),\n                                            _createElementVNode(\"div\", _hoisted_14, [\n                                                (selectedItem.value && selectedInfo.value)\n                                                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                                        _createElementVNode(\"h3\", _hoisted_15, _toDisplayString(selectedInfo.value.label), 1 /* TEXT */),\n                                                        _createElementVNode(\"div\", _hoisted_16, [\n                                                            _cache[2] || (_cache[2] = _createElementVNode(\"span\", { class: \"detail-label\" }, \"作者:\", -1 /* CACHED */)),\n                                                            _createElementVNode(\"span\", _hoisted_17, _toDisplayString(selectedInfo.value.author || '未知'), 1 /* TEXT */)\n                                                        ]),\n                                                        _createElementVNode(\"div\", _hoisted_18, [\n                                                            _cache[3] || (_cache[3] = _createElementVNode(\"span\", { class: \"detail-label\" }, \"大小:\", -1 /* CACHED */)),\n                                                            _createElementVNode(\"span\", _hoisted_19, _toDisplayString(selectedInfo.value.entries.length) + \" 个条目\", 1 /* TEXT */)\n                                                        ]),\n                                                        (selectedInfo.value.exclusionTargets.length > 0)\n                                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_20, [\n                                                                _cache[4] || (_cache[4] = _createElementVNode(\"span\", { class: \"detail-label\" }, \"互斥:\", -1 /* CACHED */)),\n                                                                _createElementVNode(\"span\", _hoisted_21, _toDisplayString(selectedInfo.value.exclusionTargets.join(', ')), 1 /* TEXT */)\n                                                            ]))\n                                                            : _createCommentVNode(\"v-if\", true),\n                                                        (selectedInfo.value.replacementTargets.length > 0)\n                                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_22, [\n                                                                _cache[5] || (_cache[5] = _createElementVNode(\"span\", { class: \"detail-label\" }, \"替换:\", -1 /* CACHED */)),\n                                                                _createElementVNode(\"span\", _hoisted_23, _toDisplayString(selectedInfo.value.replacementTargets.join(', ')), 1 /* TEXT */)\n                                                            ]))\n                                                            : _createCommentVNode(\"v-if\", true),\n                                                        (selectedInfo.value.prerequisiteTargets.length > 0)\n                                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_24, [\n                                                                _cache[6] || (_cache[6] = _createElementVNode(\"span\", { class: \"detail-label\" }, \"前置:\", -1 /* CACHED */)),\n                                                                _createElementVNode(\"span\", _hoisted_25, _toDisplayString(selectedInfo.value.prerequisiteTargets.join(', ')), 1 /* TEXT */)\n                                                            ]))\n                                                            : _createCommentVNode(\"v-if\", true),\n                                                        _createElementVNode(\"div\", _hoisted_26, [\n                                                            _cache[7] || (_cache[7] = _createElementVNode(\"span\", { class: \"detail-label\" }, \"信息:\", -1 /* CACHED */)),\n                                                            _createElementVNode(\"span\", _hoisted_27, _toDisplayString(selectedInfo.value.info || '无'), 1 /* TEXT */)\n                                                        ]),\n                                                        _createElementVNode(\"div\", _hoisted_28, [\n                                                            _createElementVNode(\"button\", {\n                                                                class: _normalizeClass([\"toggle-btn\", { 'toggled-on': localSelections.value.get(selectedItem.value) }]),\n                                                                onClick: _cache[1] || (_cache[1] = ($event) => (handleToggle(selectedItem.value)))\n                                                            }, _toDisplayString(localSelections.value.get(selectedItem.value) ? '已启用' : '已禁用'), 3 /* TEXT, CLASS */)\n                                                        ])\n                                                    ], 64 /* STABLE_FRAGMENT */))\n                                                    : (_openBlock(), _createElementBlock(\"div\", _hoisted_29, \"请选择一个\" + _toDisplayString(tab.label) + \"查看详情\", 1 /* TEXT */))\n                                            ])\n                                        ]))\n                            ]), [\n                                [_vShow, activeTab.value === tab.key]\n                            ]);\n                        }), 64 /* STABLE_FRAGMENT */))\n                    ])\n                ]),\n                _createElementVNode(\"div\", _hoisted_30, [\n                    _cache[8] || (_cache[8] = _createElementVNode(\"div\", null, null, -1 /* CACHED */)),\n                    _createElementVNode(\"button\", {\n                        class: \"nav-button\",\n                        disabled: isLoading.value || isSaving.value,\n                        onClick: handleNext\n                    }, [\n                        _createElementVNode(\"span\", null, _toDisplayString(isSaving.value ? '保存中...' : '下一步'), 1 /* TEXT */)\n                    ], 8 /* PROPS */, _hoisted_31)\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./DLCManagementPage.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DLCManagementPage.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./DLCManagementPage.vue?vue&type=style&index=0&id=aa6b4696&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_@vue+compiler-sfc@3.5.29_vue@3.5.29_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-aa6b4696\"]])\n\nexport default __exports__","/**\n * 环境状态初始值\n */\nexport const initialEnvStatus = {\n  tavernHelper: {\n    version: null as string | null,\n    status: 'unknown',\n    statusText: '加载中...',\n  },\n  ejsTemplate: {\n    status: 'unknown',\n    statusText: '加载中...',\n    enabledStatus: 'unknown',\n    enabledText: '加载中...',\n  },\n  mvu: {\n    status: 'unknown',\n    statusText: '加载中...',\n  },\n  allOk: false,\n};\n\n/**\n * 版本比较工具\n * @returns 1 if v1 > v2, -1 if v1 < v2, 0 if equal\n */\nexport function compareVersion(v1: string | null, v2: string): number {\n  if (!v1 || !v2) return -1;\n  const s1 = String(v1);\n  const s2 = String(v2);\n  const arr1 = s1.split('.').map(Number);\n  const arr2 = s2.split('.').map(Number);\n  const len = Math.max(arr1.length, arr2.length);\n  for (let i = 0; i < len; i++) {\n    const num1 = arr1[i] || 0;\n    const num2 = arr2[i] || 0;\n    if (num1 > num2) return 1;\n    if (num1 < num2) return -1;\n  }\n  return 0;\n}\n//检查酒馆助手\nexport function checkTavernHelper() {\n  const version = getTavernHelperVersion();\n\n  if (!version) {\n    return {\n      version: null,\n      status: 'error',\n      statusText: '未找到',\n    };\n  }\n\n  const isVersionOk = compareVersion(version, '4.3.17') >= 0;\n\n  return {\n    version,\n    status: isVersionOk ? 'ok' : 'warn',\n    statusText: isVersionOk ? '正常' : '版本过低',\n  };\n}\n//检查ejs\nexport function checkEjsTemplate() {\n  try {\n    const context = window.top?.SillyTavern.getContext();\n    const ejsTemplateSettings = context.extensionSettings.EjsTemplate;\n\n    if (!ejsTemplateSettings) {\n      return {\n        status: 'error',\n        statusText: '未检测到',\n        enabled: false,\n        enabledStatus: 'unknown',\n        enabledText: '---',\n      };\n    }\n\n    return {\n      status: 'ok',\n      statusText: '存在',\n      enabled: ejsTemplateSettings.enabled,\n      enabledStatus: ejsTemplateSettings.enabled ? 'ok' : 'warn',\n      enabledText: ejsTemplateSettings.enabled ? '已启用' : '未启用',\n    };\n  } catch (e) {\n    return {\n      status: 'error',\n      statusText: '无法访问',\n      enabled: false,\n      enabledStatus: 'unknown',\n      enabledText: '---',\n    };\n  }\n}\n//检查mvu\nexport async function checkMvu() {\n  const timeoutDuration = 3000;\n  let timeoutId;\n\n  try {\n    const timeoutPromise = new Promise((_, reject) => {\n      timeoutId = setTimeout(() => {\n        reject(new Error('timed out'));\n      }, timeoutDuration);\n    });\n\n    await Promise.race([waitGlobalInitialized('Mvu'), timeoutPromise]);\n\n    clearTimeout(timeoutId);\n\n    return { status: 'ok', statusText: '正常' };\n  } catch (error) {\n    if (timeoutId) clearTimeout(timeoutId);\n    return { status: 'error', statusText: '异常/超时' };\n  }\n}\n//执行完整环境检查\nexport async function performFullEnvCheck() {\n  const tavernHelper = checkTavernHelper();\n  const ejsTemplate = checkEjsTemplate();\n  const mvu = await checkMvu();\n\n  const allOk =\n    tavernHelper.status === 'ok' &&\n    ejsTemplate.status === 'ok' &&\n    ejsTemplate.enabledStatus === 'ok' &&\n    mvu.status === 'ok';\n\n  return {\n    tavernHelper,\n    ejsTemplate,\n    mvu,\n    allOk,\n  };\n}\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = { class: \"env-check-page\" };\nconst _hoisted_2 = { class: \"env-check-container\" };\nconst _hoisted_3 = { class: \"env-check-item\" };\nconst _hoisted_4 = { class: \"env-check-details\" };\nconst _hoisted_5 = { class: \"env-check-item\" };\nconst _hoisted_6 = { class: \"env-check-details\" };\nconst _hoisted_7 = { class: \"env-check-item\" };\nconst _hoisted_8 = { class: \"env-check-details\" };\nconst _hoisted_9 = { class: \"recheck-container\" };\nconst _hoisted_10 = [\"disabled\"];\nconst _hoisted_11 = {\n    key: 0,\n    class: \"success-message\"\n};\nimport { onMounted, ref, watch } from 'vue';\nimport { initialEnvStatus, performFullEnvCheck } from '../services/envCheck';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'EnvCheckPage',\n    emits: ['next', 'envCheckComplete'],\n    setup(__props, { emit: __emit }) {\n        const emit = __emit;\n        const isChecking = ref(false);\n        const envStatus = ref({ ...initialEnvStatus });\n        async function performCheck() {\n            isChecking.value = true;\n            try {\n                const result = await performFullEnvCheck();\n                envStatus.value = result;\n                emit('envCheckComplete', result);\n            }\n            catch (error) {\n                console.error('环境检查失败:', error);\n            }\n            finally {\n                isChecking.value = false;\n            }\n        }\n        // 监听环境检查状态，检查通过后自动跳转到下一页\n        watch(() => envStatus.value.allOk, allOk => {\n            if (allOk && !isChecking.value) {\n                emit('next');\n            }\n        });\n        onMounted(() => {\n            performCheck();\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _cache[9] || (_cache[9] = _createElementVNode(\"h2\", { class: \"main-title\" }, \"环境检查\", -1 /* CACHED */)),\n                _createCommentVNode(\" 环境检查部分 \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createCommentVNode(\" 酒馆助手 \"),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"env-check-label\" }, [\n                            _createElementVNode(\"span\", { class: \"icon\" }, \"⚙️\"),\n                            _createElementVNode(\"span\", null, \"酒馆助手\")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_4, [\n                            _createElementVNode(\"span\", null, [\n                                _cache[0] || (_cache[0] = _createTextVNode(\"版本: \", -1 /* CACHED */)),\n                                _createElementVNode(\"strong\", {\n                                    class: _normalizeClass('status-' + (envStatus.value.tavernHelper.version ? 'ok' : 'unknown'))\n                                }, _toDisplayString(envStatus.value.tavernHelper.version || '未知'), 3 /* TEXT, CLASS */)\n                            ]),\n                            _createElementVNode(\"span\", null, [\n                                _cache[1] || (_cache[1] = _createTextVNode(\"状态: \", -1 /* CACHED */)),\n                                _createElementVNode(\"strong\", {\n                                    class: _normalizeClass('status-' + envStatus.value.tavernHelper.status)\n                                }, _toDisplayString(envStatus.value.tavernHelper.statusText), 3 /* TEXT, CLASS */)\n                            ])\n                        ])\n                    ]),\n                    _createCommentVNode(\" 提示词模板 (EJS) \"),\n                    _createElementVNode(\"div\", _hoisted_5, [\n                        _cache[5] || (_cache[5] = _createElementVNode(\"div\", { class: \"env-check-label\" }, [\n                            _createElementVNode(\"span\", { class: \"icon\" }, \"📄\"),\n                            _createElementVNode(\"span\", null, \"提示词模板 (EJS)\")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_6, [\n                            _createElementVNode(\"span\", null, [\n                                _cache[3] || (_cache[3] = _createTextVNode(\"状态: \", -1 /* CACHED */)),\n                                _createElementVNode(\"strong\", {\n                                    class: _normalizeClass('status-' + envStatus.value.ejsTemplate.status)\n                                }, _toDisplayString(envStatus.value.ejsTemplate.statusText), 3 /* TEXT, CLASS */)\n                            ]),\n                            _createElementVNode(\"span\", null, [\n                                _cache[4] || (_cache[4] = _createTextVNode(\"启用?: \", -1 /* CACHED */)),\n                                _createElementVNode(\"strong\", {\n                                    class: _normalizeClass('status-' + envStatus.value.ejsTemplate.enabledStatus)\n                                }, _toDisplayString(envStatus.value.ejsTemplate.enabledText), 3 /* TEXT, CLASS */)\n                            ])\n                        ])\n                    ]),\n                    _createCommentVNode(\" MVU 框架 \"),\n                    _createElementVNode(\"div\", _hoisted_7, [\n                        _cache[7] || (_cache[7] = _createElementVNode(\"div\", { class: \"env-check-label\" }, [\n                            _createElementVNode(\"span\", { class: \"icon\" }, \"🧩\"),\n                            _createElementVNode(\"span\", null, \"MVU 框架\")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_8, [\n                            _createElementVNode(\"span\", null, [\n                                _cache[6] || (_cache[6] = _createTextVNode(\"状态: \", -1 /* CACHED */)),\n                                _createElementVNode(\"strong\", {\n                                    class: _normalizeClass('status-' + envStatus.value.mvu.status)\n                                }, _toDisplayString(envStatus.value.mvu.statusText), 3 /* TEXT, CLASS */)\n                            ])\n                        ])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_9, [\n                        _createElementVNode(\"button\", {\n                            class: \"recheck-button\",\n                            disabled: isChecking.value,\n                            onClick: performCheck\n                        }, _toDisplayString(isChecking.value ? '检查中...' : '重新检查'), 9 /* TEXT, PROPS */, _hoisted_10)\n                    ])\n                ]),\n                _createCommentVNode(\" 检查通过提示 \"),\n                _createVNode(_Transition, { name: \"fade\" }, {\n                    default: _withCtx(() => [\n                        (envStatus.value.allOk && !isChecking.value)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [...(_cache[8] || (_cache[8] = [\n                                    _createElementVNode(\"span\", { class: \"success-icon\" }, \"✅\", -1 /* CACHED */),\n                                    _createElementVNode(\"span\", null, \"环境检查通过，正在跳转...\", -1 /* CACHED */)\n                                ]))]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                })\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./EnvCheckPage.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./EnvCheckPage.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./EnvCheckPage.vue?vue&type=style&index=0&id=1dbb7d39&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_@vue+compiler-sfc@3.5.29_vue@3.5.29_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1dbb7d39\"]])\n\nexport default __exports__","import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, createStaticVNode as _createStaticVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"showcase-section\" }\nconst _hoisted_2 = { class: \"credits-container\" }\nconst _hoisted_3 = { class: \"author-badges\" }\nconst _hoisted_4 = { class: \"author-badges\" }\nconst _hoisted_5 = { class: \"credits-special\" }\n\n\nexport default {\n  __name: 'ShowcaseSection',\n  setup(__props) {\n\nconst teamMembers = [\n  '@𝕽𝖍𝖞𝖘_𝖟_瑞',\n  '@Yoyo514',\n  '@十七',\n  '@Hilo',\n  '@快乐柠萌茶',\n  '@三饺初华',\n  '@银时萝',\n  '@镜梦幻',\n  '@风见幽泠',\n  '@lili',\n  '@北游',\n  '@仰望星空',\n  '@K1nn',\n  '@随风渐变',\n  '@Aoo',\n  '@青砚',\n];\n\nconst hallOfFame = ['@Kitaikuyo', '@秋天的咸鱼'];\n\nconst specialThanks = ['@FL已放弃治疗', '@tongtny123', '@willing', '@肆祀一一', '@大乐'];\n\nreturn (_ctx, _cache) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createCommentVNode(\" 主标题 \"),\n    _cache[3] || (_cache[3] = _createElementVNode(\"h1\", { class: \"page-super-title\" }, \"命定之诗与黄昏之歌\", -1 /* CACHED */)),\n    _cache[4] || (_cache[4] = _createElementVNode(\"p\", { class: \"page-subtitle-english\" }, \"Destined Poetry & Twilight Song\", -1 /* CACHED */)),\n    _cache[5] || (_cache[5] = _createElementVNode(\"hr\", { class: \"ornamental-divider\" }, null, -1 /* CACHED */)),\n    _createCommentVNode(\" 制作人员展示区 \"),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _cache[1] || (_cache[1] = _createElementVNode(\"div\", { class: \"credits-title\" }, \"❖ 制作团队 ❖\", -1 /* CACHED */)),\n      _createElementVNode(\"div\", _hoisted_3, [\n        (_openBlock(), _createElementBlock(_Fragment, null, _renderList(teamMembers, (author) => {\n          return _createElementVNode(\"span\", {\n            key: author,\n            class: \"author-badge\"\n          }, _toDisplayString(author), 1 /* TEXT */)\n        }), 64 /* STABLE_FRAGMENT */))\n      ]),\n      _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"credits-title\" }, \"❖ 英灵殿 ❖\", -1 /* CACHED */)),\n      _createElementVNode(\"div\", _hoisted_4, [\n        (_openBlock(), _createElementBlock(_Fragment, null, _renderList(hallOfFame, (author) => {\n          return _createElementVNode(\"span\", {\n            key: author,\n            class: \"author-badge\"\n          }, _toDisplayString(author), 1 /* TEXT */)\n        }), 64 /* STABLE_FRAGMENT */))\n      ]),\n      _createElementVNode(\"div\", _hoisted_5, [\n        _cache[0] || (_cache[0] = _createElementVNode(\"strong\", null, \"特别鸣谢：\", -1 /* CACHED */)),\n        _createTextVNode(_toDisplayString(specialThanks.join(' ')), 1 /* TEXT */)\n      ])\n    ]),\n    _createCommentVNode(\" 合并后的信息面板 \"),\n    _cache[6] || (_cache[6] = _createStaticVNode(\"<details class=\\\"info-panel\\\" data-v-41312ea8><summary data-v-41312ea8><span data-v-41312ea8>世界背景与相关信息</span><span class=\\\"arrow-toggle\\\" data-v-41312ea8>❖</span></summary><div class=\\\"info-content\\\" data-v-41312ea8><h3 data-v-41312ea8>阿斯塔利亚世界</h3><p data-v-41312ea8> 小时候的你读过那样的故事吗？在剑与魔法的异世界中，幻想中的故事。一句澄澈而坚定的誓言，一段英雄的骑行，一页由凡人书写的史诗。 </p><div class=\\\"world-quote\\\" data-v-41312ea8>&quot;家园已在身后，世界尽在眼前。&quot;</div><div class=\\\"world-quote\\\" data-v-41312ea8> &quot;长夜将至，我从今开始守望，至死方休。我将不娶妻、不封地、不生子。我将不戴宝冠，不争荣宠。我将尽忠职守，生死于斯。我是黑暗中的利剑，长城上的守卫，抵御寒冷的烈焰，破晓时分的光线，唤醒眠者的号角，守护王国的坚盾。我将生命与荣耀献给守夜人，今夜如此，夜夜皆然。&quot; </div><div class=\\\"world-quote\\\" data-v-41312ea8> &quot;荣耀即吾命！&quot;<br data-v-41312ea8> &quot;愿黑松长青，愿号角长鸣，愿理想闪耀如初，愿长剑锋利如故。&quot; </div><p data-v-41312ea8> 这里是阿斯塔利亚。&quot;剑与魔法&quot;、&quot;诗与远方&quot;、&quot;历史与传说&quot;、&quot;生者与死者&quot;、&quot;英雄与史诗&quot;、&quot;神灵与命运&quot;的世界。 </p><p data-v-41312ea8>请拿起你梦中与儿时最浪漫的笔，亲自书写属于你自己的冒险故事吧。</p><div class=\\\"update-section\\\" data-v-41312ea8><h3 data-v-41312ea8>获取最新更新</h3><ul data-v-41312ea8><li data-v-41312ea8><a href=\\\"https://discord.com/channels/1134557553011998840/1422790367631380490\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" data-v-41312ea8>更新频道 *脑</a></li><li data-v-41312ea8><a href=\\\"https://discord.com/channels/1291925535324110879/1422794259056033832\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" data-v-41312ea8>更新频道 *程</a></li></ul></div></div></details>\", 1))\n  ]))\n}\n}\n\n}","/* unplugin-vue-components disabled */import script from \"./ShowcaseSection.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ShowcaseSection.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ShowcaseSection.vue?vue&type=style&index=0&id=41312ea8&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_@vue+compiler-sfc@3.5.29_vue@3.5.29_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-41312ea8\"]])\n\nexport default __exports__","// ==================== 变量输出方式相关 ====================\n\nimport { getWorldBookName, updateWorldBook } from '@/home/services/worldbookload&update';\n\n// 固定的条目名称\nconst OUTPUT_ENTRY_MAIN_API = 'output_format (随AI输出开，主API)';\nconst OUTPUT_ENTRY_EXTRA_API = '[mvu_update]output_format (使用额外模型更新变量开)';\n\n// 变量输出方式选项\nexport const OUTPUT_OPTIONS = [\n  {\n    value: '主API',\n    label: '主API',\n    desc: '使用主API解析变量更新',\n    entryName: OUTPUT_ENTRY_MAIN_API,\n  },\n  {\n    value: '额外API',\n    label: '额外API',\n    desc: '使用额外API解析变量更新',\n    entryName: OUTPUT_ENTRY_EXTRA_API,\n  },\n];\n\n/**\n * 保存输出方式选择到世界书\n * @param selectedValue 选中的输出方式值（'主API' 或 '额外API'）\n */\nexport async function saveOutputSelection(selectedValue: string): Promise<void> {\n  const bookName = getWorldBookName();\n  if (!bookName) {\n    console.error('未找到世界书');\n    return;\n  }\n\n  // 根据选择构建更新条目\n  const updatedEntries = OUTPUT_OPTIONS.map(opt => ({\n    name: opt.entryName,\n    enabled: opt.value === selectedValue,\n  }));\n\n  await updateWorldBook(updatedEntries, bookName);\n}\n","/**\n * 场景列表配置\n */\nexport const scenarios = [\n  { index: 1, label: '我的故事将由我亲手书写(自定义)' },\n  { index: 2, label: '《来自异世界的\"勇者\"》' },\n  { index: 3, label: '《红月之誓（画饼占坑）》' },\n  { index: 4, label: '《线与天堂与彼岸花》' },\n  { index: 5, label: '《慈悲的\"魔王\"（画饼占坑）》' },\n];\n\n/**\n * 切换场景（Swipe）\n */\nexport async function switchSwipe(swipeId: number): Promise<boolean> {\n  if (typeof SillyTavern === 'undefined' || !SillyTavern.chat || SillyTavern.chat.length === 0) {\n    console.warn('SillyTavern environment not detected. Action will not be executed.');\n    return false;\n  }\n\n  const swipeIndex = swipeId;\n\n  if (\n    typeof SillyTavern.chat[0].swipe_id !== 'undefined' &&\n    SillyTavern.chat[0].swipe_id !== swipeIndex\n  ) {\n    if (SillyTavern.chat[0].swipes && SillyTavern.chat[0].swipes.length > swipeIndex) {\n      SillyTavern.chat[0].swipe_id = swipeIndex;\n      SillyTavern.chat[0].mes = SillyTavern.chat[0].swipes[swipeIndex];\n      await SillyTavern.saveChat();\n      await SillyTavern.reloadCurrentChat();\n      console.log(`Successfully switched to scenario (swipe_id: ${swipeIndex}).`);\n      return true;\n    } else {\n      console.error(`Swipe index ${swipeIndex} is out of bounds or swipes array is missing.`);\n      return false;\n    }\n  } else {\n    console.log(`Scenario ${swipeIndex} is already selected or swipe data is unavailable.`);\n    return true;\n  }\n}\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = { class: \"start-page\" };\nconst _hoisted_2 = { class: \"control-panel-container\" };\nconst _hoisted_3 = { class: \"scenario-list\" };\nconst _hoisted_4 = [\"onClick\"];\nconst _hoisted_5 = { class: \"output-settings-container\" };\nconst _hoisted_6 = { class: \"control-group\" };\nconst _hoisted_7 = { class: \"control-buttons\" };\nconst _hoisted_8 = [\"onClick\"];\nconst _hoisted_9 = { class: \"button-desc\" };\nconst _hoisted_10 = { class: \"step-footer\" };\nconst _hoisted_11 = [\"disabled\"];\nimport { computed, ref } from 'vue';\nimport { OUTPUT_OPTIONS, saveOutputSelection } from '../services/outputMethod';\nimport { scenarios, switchSwipe } from '../services/StartPage';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'StartPage',\n    emits: ['prev'],\n    setup(__props, { emit: __emit }) {\n        const emit = __emit;\n        const selectedIndex = ref(null);\n        const selectedOutput = ref('');\n        const isLoading = ref(false);\n        // 变量输出方式选项\n        const outputOptions = OUTPUT_OPTIONS;\n        // 判断是否可以进入下一步（需要同时选择场景和输出方式）\n        const canProceed = computed(() => {\n            return selectedIndex.value !== null && selectedOutput.value !== '';\n        });\n        function handleScenarioSelect(index) {\n            selectedIndex.value = index;\n        }\n        function selectOutput(value) {\n            selectedOutput.value = value;\n        }\n        /**\n         * 点击下一步：保存输出方式选择并切换场景\n         */\n        async function handleNext() {\n            if (!canProceed.value)\n                return;\n            isLoading.value = true;\n            try {\n                // 保存输出方式选择到世界书\n                await saveOutputSelection(selectedOutput.value);\n                // 切换到选中的场景\n                await switchSwipe(selectedIndex.value);\n            }\n            catch (error) {\n                console.error('保存设置失败:', error);\n            }\n            finally {\n                isLoading.value = false;\n            }\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _cache[2] || (_cache[2] = _createElementVNode(\"h2\", { class: \"main-title\" }, \"你的故事将从何开始\", -1 /* CACHED */)),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"ul\", _hoisted_3, [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(scenarios), (scenario) => {\n                            return (_openBlock(), _createElementBlock(\"li\", {\n                                key: scenario.index\n                            }, [\n                                _createElementVNode(\"button\", {\n                                    class: _normalizeClass([\"scenario-option\", { selected: selectedIndex.value === scenario.index }]),\n                                    onClick: ($event) => (handleScenarioSelect(scenario.index))\n                                }, _toDisplayString(scenario.label), 11 /* TEXT, CLASS, PROPS */, _hoisted_4)\n                            ]));\n                        }), 128 /* KEYED_FRAGMENT */))\n                    ])\n                ]),\n                _createElementVNode(\"div\", _hoisted_5, [\n                    _createElementVNode(\"div\", _hoisted_6, [\n                        _createElementVNode(\"div\", _hoisted_7, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(outputOptions), (option) => {\n                                return (_openBlock(), _createElementBlock(\"div\", {\n                                    key: option.value,\n                                    class: \"control-item-wrapper\"\n                                }, [\n                                    _createElementVNode(\"button\", {\n                                        class: _normalizeClass([\"control-button\", { selected: selectedOutput.value === option.value }]),\n                                        onClick: ($event) => (selectOutput(option.value))\n                                    }, _toDisplayString(option.label), 11 /* TEXT, CLASS, PROPS */, _hoisted_8),\n                                    _createElementVNode(\"span\", _hoisted_9, _toDisplayString(option.desc), 1 /* TEXT */)\n                                ]));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ])\n                    ])\n                ]),\n                _createElementVNode(\"div\", _hoisted_10, [\n                    _createElementVNode(\"button\", {\n                        class: \"nav-button\",\n                        onClick: _cache[0] || (_cache[0] = ($event) => (_ctx.$emit('prev')))\n                    }, [...(_cache[1] || (_cache[1] = [\n                            _createElementVNode(\"span\", null, \"上一步\", -1 /* CACHED */)\n                        ]))]),\n                    _createElementVNode(\"button\", {\n                        class: \"nav-button\",\n                        disabled: !canProceed.value || isLoading.value,\n                        onClick: handleNext\n                    }, [\n                        _createElementVNode(\"span\", null, _toDisplayString(isLoading.value ? '保存中...' : '开始旅程'), 1 /* TEXT */)\n                    ], 8 /* PROPS */, _hoisted_11)\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./StartPage.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./StartPage.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./StartPage.vue?vue&type=style&index=0&id=72407620&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_@vue+compiler-sfc@3.5.29_vue@3.5.29_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-72407620\"]])\n\nexport default __exports__","import { createVNode as _createVNode, resolveDynamicComponent as _resolveDynamicComponent, openBlock as _openBlock, createBlock as _createBlock, Transition as _Transition, withCtx as _withCtx, createElementVNode as _createElementVNode, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"selector-scroll\" }\nconst _hoisted_2 = { class: \"step-content\" }\n\nimport { provide, readonly, ref } from 'vue';\nimport CorePage from './components/CorePage.vue';\nimport DLCManagementPage from './components/DLCManagementPage.vue';\nimport EnvCheckPage from './components/EnvCheckPage.vue';\nimport ShowcaseSection from './components/ShowcaseSection.vue';\nimport StartPage from './components/StartPage.vue';\n\n\nexport default {\n  __name: 'App',\n  setup(__props) {\n\nconst currentStep = ref(0);\n\nconst steps = [EnvCheckPage, DLCManagementPage, CorePage, StartPage];\n\n// 环境检查结果\nconst envCheckResult = ref(null);\n\n// 提供给子组件使用\nprovide('envCheckResult', readonly(envCheckResult));\n\nfunction nextStep() {\n  if (currentStep.value < steps.length - 1) {\n    currentStep.value++;\n  }\n}\n\nfunction prevStep() {\n  if (currentStep.value > 0) {\n    currentStep.value--;\n  }\n}\n\nfunction handleEnvCheckComplete(result) {\n  envCheckResult.value = result;\n}\n\nreturn (_ctx, _cache) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(ShowcaseSection),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createVNode(_Transition, {\n        name: \"fade\",\n        mode: \"out-in\"\n      }, {\n        default: _withCtx(() => [\n          (_openBlock(), _createBlock(_resolveDynamicComponent(steps[currentStep.value]), {\n            onNext: nextStep,\n            onPrev: prevStep,\n            onEnvCheckComplete: handleEnvCheckComplete\n          }, null, 32 /* NEED_HYDRATION */))\n        ]),\n        _: 1 /* STABLE */\n      })\n    ])\n  ]))\n}\n}\n\n}","/* unplugin-vue-components disabled */import script from \"./App.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=0af98a94&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/.pnpm/vue-loader@17.4.2_@vue+compiler-sfc@3.5.29_vue@3.5.29_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0af98a94\"]])\n\nexport default __exports__","import { createApp } from 'vue';\nimport App from './App.vue';\nimport './assets/styles/global.css';\n\ncreateApp(App).mount('#app');\n"],"names":["exports","sfc","props","target","__vccOpts","key","val","__webpack_module_cache__","Vue","getWorldBookName","bookInfo","window","top","TavernHelper","getCharWorldbookNames","primary","async","getFilteredEntries","pattern","bookName","worldbook","getWorldbook","map","entry","name","enabled","getWorldbookEntries","length","filter","test","updateWorldBook","entries","Error","enabledMap","Map","e","updateWorldbookWith","newEnabled","get","undefined","UNCATEGORIZED_TAB","SPECIAL_RECOMMEND_TAB","CORE_PATTERN","AUTHOR_PATTERN","initialCoreState","coreOptions","localCoreSelections","tabs","activeTab","cachedRankings","cachedSpecialRecommendCores","DATA_BASE_PATH","getTabsFromRankings","Rankings","response","fetch","ok","console","log","text","data","error","loadCoreClassification","dynamicTabs","Object","keys","getCoreRanking","label","allTabs","matchedTabs","note","tabName","tabData","push","getSelectedCore","specialRecommendCores","specialRecommendCoreList","existingCoreValues","result","count","coreValue","config","nameWithoutPrefix","replace","authorMatch","match","author","value","specialNote","available","has","generateSpecialRecommendCores","Set","availableSpecialCores","core","ranking","coreTabs","unshift","recommendCore","find","c","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","__name","emits","setup","__props","emit","__emit","isLoading","ref","isSaving","tabStartIndex","selectedCore","computed","isSpecialRecommendTab","showArrows","visibleTabs","slice","handlePrevTabs","Math","max","handleNextTabs","min","getCoresForTab","tab","includes","loadCoreOptions","specialRecommendCoresData","loadSpecialRecommendCores","handleRefresh","handleSelectCore","newSelections","set","selectCore","handleNext","hasChanges","updatedEntries","Array","from","saveChanges","watch","newTab","tabIndex","indexOf","onMounted","_ctx","_cache","disabled","title","onClick","active","$event","unavailable","selected","$emit","__webpack_require__","moduleId","cachedModule","module","__webpack_modules__","initialDLCState","dlcOptions","localSelections","DLC_PATTERN","DLC_GROUP_KEY_PATTERN","DLC_CATEGORY_PATTERN","DLC_LABEL_PATTERN","EXCLUSION_PATTERN","REPLACEMENT_PATTERN","PREREQUISITE_PATTERN","escapeRegExp","string","extractGroupKey","entryName","extractCategory","groupKey","cat","extractLabel","extractTargetsWithPattern","targets","regex","RegExp","source","exec","extractMergedTargets","allTargets","forEach","t","add","extractAuthorInfo","authorInfo","trim","dashIndex","substring","info","saveDLCChanges","opt","hasDLCChanges","originalStates","exclusionTargetsToDisable","exclusionTargets","collectExclusionTargetsToDisable","replacementTargetsToDisable","replacementTargets","collectReplacementTargetsToDisable","replacementTargetsToEnable","isEnabled","wasEnabled","collectReplacementTargetsToEnable","filteredReplacementTargetsToEnable","matchingEntries","existingIndex","findIndex","_hoisted_30","_hoisted_31","searchTerm","selectedItem","filteredOptionsForTab","category","term","toLowerCase","categoryOptions","optionsForTab","selectedInfo","loadAllOptions","groups","groupEntries","allEnabled","every","prerequisiteTargets","sortedOptions","options","sort","a","b","localeCompare","sensitivity","pinyinCompare","loadDLCOptions","handleToggle","targetDLC","satisfied","missingPrerequisites","prerequisiteDLC","checkPrerequisites","selections","success","join","exclusionTarget","toggleDLC","alert","updated","type","placeholder","initialEnvStatus","tavernHelper","version","status","statusText","ejsTemplate","enabledStatus","enabledText","mvu","allOk","checkTavernHelper","getTavernHelperVersion","isVersionOk","v1","v2","s1","String","s2","arr1","split","Number","arr2","len","i","num1","num2","compareVersion","performFullEnvCheck","context","SillyTavern","getContext","ejsTemplateSettings","extensionSettings","EjsTemplate","checkEjsTemplate","timeoutId","timeoutPromise","Promise","_","reject","setTimeout","race","waitGlobalInitialized","clearTimeout","checkMvu","isChecking","envStatus","performCheck","default","teamMembers","hallOfFame","specialThanks","OUTPUT_OPTIONS","desc","scenarios","index","selectedIndex","selectedOutput","outputOptions","canProceed","selectedValue","saveOutputSelection","swipeId","chat","warn","swipeIndex","swipe_id","swipes","mes","saveChat","reloadCurrentChat","switchSwipe","scenario","option","currentStep","steps","EnvCheckPage","DLCManagementPage","CorePage","StartPage","envCheckResult","nextStep","prevStep","handleEnvCheckComplete","provide","readonly","ShowcaseSection","mode","onNext","onPrev","onEnvCheckComplete","createApp","App","mount"],"sourceRoot":""}