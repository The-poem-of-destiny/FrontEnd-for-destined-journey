# DLC 条目命名规范

本文档面向世界书条目作者，说明如何正确填写 DLC 条目的名称，以便系统自动识别、分组和管理。

---

## 基本格式

每个 DLC 条目的名称必须遵循以下格式：

```
[DLC][类别][名称]描述内容(作者-附加信息)
```

| 部分              | 是否必填 | 说明                                   |
| ----------------- | -------- | -------------------------------------- |
| `[DLC]`           | ✅ 必填  | 固定前缀，标识这是一个 DLC 条目        |
| `[类别]`          | ✅ 必填  | 三选一：`[角色]`、`[事件]`、`[扩展]`   |
| `[名称]`          | ✅ 必填  | DLC 的分组名称，同名的条目会被归为一组 |
| 描述内容          | 可选     | 条目的具体说明，自由填写               |
| `(作者-附加信息)` | 可选     | 放在名称末尾的括号中                   |

### 最简示例

```
[DLC][角色][薇薇拉]
```

### 完整示例

```
[DLC][角色][薇薇拉]薇薇拉的核心设定(Author-原创角色)
```

---

## 类别说明

系统支持三种 DLC 类别，在管理页面中分 Tab 显示：

| 类别     | 用途                        | 示例                    |
| -------- | --------------------------- | ----------------------- |
| `[角色]` | 角色相关的条目              | `[DLC][角色][薇薇拉]`   |
| `[事件]` | 事件/剧情相关的条目         | `[DLC][事件][双子]`     |
| `[扩展]` | 玩法扩展/系统扩展相关的条目 | `[DLC][扩展][地城扩展]` |

---

## 分组机制

**名称相同的条目会被自动归为一组**，作为一个 DLC 整体启用或禁用。

例如，以下 3 个条目属于同一个 DLC「薇薇拉」：

```
[DLC][角色][薇薇拉]薇薇拉-核心设定(Author-原创角色)
[DLC][角色][薇薇拉]薇薇拉-技能列表(Author)
[DLC][角色][薇薇拉]薇薇拉-专属剧情(Author)
```

当用户在管理页面启用或禁用「薇薇拉」时，这 3 个条目会同时启用或禁用。

> **注意**：分组依据是 `[DLC][类别][名称]`
> 这三个方括号部分完全相同。后面的描述内容和作者信息不影响分组。

---

## 作者和附加信息

在条目名称的**最末尾**使用括号标注作者和附加信息：

```
(作者)
(作者-附加信息)
```

### 示例

```
[DLC][角色][薇薇拉]薇薇拉-本体(Author)
[DLC][角色][薇薇拉]薇薇拉-本体(Author-原创角色)
[DLC][事件][双子]双子星的咏叹调-第一章(Star-同人剧情)
```

系统会自动提取并在详情面板中显示：

- **作者**: `Author`
- **信息**: `原创角色`

> **注意**：系统只识别**最后一个**括号中的内容。如果条目名称中有多个括号，只有最后一个被解析为作者信息。

---

## 关系标记

关系标记用于定义 DLC 之间的依赖和冲突关系。它们放在 `[名称]` 之后、描述内容之前。

**关系标记可以跨类别生效**——角色、事件、扩展之间可以互相建立关系。

### 互斥 `[!目标名称]`

开启当前 DLC 时，会**自动关闭**名称中包含 `[目标名称]` 的其他 DLC。

```
[DLC][扩展][新版地城][!原版地城]新版地城-控制(Author)
```

含义：启用「新版地城」时，自动禁用名称中包含 `[原版地城]` 的所有 DLC。

**跨类别示例**：

```
[DLC][事件][新版剧情][!旧版剧情]新版主线(Author)
[DLC][事件][旧版剧情]旧版主线(Author)
```

启用「新版剧情」事件时，自动禁用「旧版剧情」事件。

### 替换 `[>目标名称]`

开启当前 DLC 时，会**禁用世界书中**名称包含 `[目标名称]`
的条目；关闭当前 DLC 时，会**恢复**这些条目的启用状态。

```
[DLC][扩展][增强战斗][>基础战斗]增强战斗系统(Author)
```

含义：启用「增强战斗」时，禁用所有名称包含 `[基础战斗]` 的条目；禁用「增强战斗」时，恢复这些条目。

> **互斥 vs 替换的区别**：
>
> - `[!]` 互斥：关闭的是**其他 DLC 组**（整组关闭），且关闭后不会自动恢复
> - `[>]` 替换：关闭的是**匹配的条目**（可以跨组），且当前 DLC 关闭时会自动恢复

### 前置需求 `[<目标名称]`

开启当前 DLC 时，需要名称中包含 `[目标名称]` 的 DLC
**已经处于启用状态**。如果前置未满足，系统会阻止启用并提示缺少的前置。

```
[DLC][事件][薇薇拉专属剧情][<薇薇拉]薇薇拉的冒险(Author)
```

含义：启用「薇薇拉专属剧情」事件之前，必须先启用「薇薇拉」角色。

**级联禁用**：当一个 DLC 被禁用时，所有依赖它作为前置的 DLC 也会被自动禁用。

**跨类别前置示例**：

```
[DLC][角色][薇薇拉]薇薇拉-本体(Author)
[DLC][事件][薇薇拉之歌][<薇薇拉]薇薇拉之歌-主线(Star)
[DLC][扩展][薇薇拉战斗风格][<薇薇拉]特殊战斗模式(Author)
```

- 「薇薇拉之歌」事件需要「薇薇拉」角色已启用
- 「薇薇拉战斗风格」扩展也需要「薇薇拉」角色已启用
- 禁用「薇薇拉」角色时，上述两个 DLC 会被自动禁用

### 组合使用多个标记

一个 DLC 可以同时使用多个关系标记：

```
[DLC][扩展][增强地城][!原版地城][>基础怪物表][<冒险者公会]增强地城系统(Author)
```

含义：

- 启用时自动关闭「原版地城」（互斥）
- 启用时禁用所有 `[基础怪物表]` 条目（替换）
- 需要「冒险者公会」已启用（前置需求）

同一类标记也可以使用多个：

```
[DLC][扩展][超级模式][!模式A][!模式B][<基础包][<扩展包]超级模式(Author)
```

---

## 完整示例

### 简单角色（单条目）

```
[DLC][角色][艾琳]艾琳-设定(Luna-原创角色)
```

### 多条目角色

```
[DLC][角色][薇薇拉]薇薇拉-核心设定(Author-原创角色)
[DLC][角色][薇薇拉]薇薇拉-技能(Author)
[DLC][角色][薇薇拉]薇薇拉-背景故事(Author)
```

### 带前置的事件

```
[DLC][事件][双子星的咏叹调][<薇薇拉]双子星-序章(Star)
[DLC][事件][双子星的咏叹调][<薇薇拉]双子星-第一章(Star)
[DLC][事件][双子星的咏叹调][<薇薇拉]双子星-结局(Star)
```

### 互斥的扩展

```
[DLC][扩展][经典战斗系统]经典战斗-核心(Official)
[DLC][扩展][经典战斗系统]经典战斗-技能表(Official)

[DLC][扩展][简化战斗系统][!经典战斗系统]简化战斗-核心(Author)
[DLC][扩展][简化战斗系统][!经典战斗系统]简化战斗-技能表(Author)
```

启用「简化战斗系统」时，「经典战斗系统」会被自动禁用，反之亦然需要手动操作。

### 跨类别关系

```
[DLC][角色][精灵族NPC]精灵族NPC包(Author)
[DLC][事件][精灵森林探索][<精灵族NPC]精灵森林主线(Author)
[DLC][扩展][精灵魔法系统][<精灵族NPC][>基础魔法]精灵魔法(Author)
```

---

## 常见错误

### ❌ 缺少 `[DLC]` 前缀

```
[角色][薇薇拉]薇薇拉-本体(Author)
```

系统不会识别这个条目。必须以 `[DLC]` 开头。

### ❌ 缺少类别

```
[DLC][薇薇拉]薇薇拉-本体(Author)
```

第二个方括号必须是 `[角色]`、`[事件]` 或 `[扩展]` 之一。

### ❌ 缺少名称

```
[DLC][角色]薇薇拉-本体(Author)
```

缺少第三个方括号 `[名称]`，系统无法正确分组。

### ❌ 分组名称不一致

```
[DLC][角色][薇薇拉]薇薇拉-本体(Author)
[DLC][角色][维维拉]薇薇拉-技能(Author)
```

`[薇薇拉]` 和 `[维维拉]`
是不同的名称，会被识别为两个不同的 DLC。请确保同一 DLC 的所有条目使用**完全相同**的名称。

### ❌ 关系标记放在名称之前

```
[DLC][!原版地城][扩展][新版地城]新版地城(Author)
```

关系标记 `[!原版地城]` 必须放在 `[名称]` 之后，不能放在 `[DLC]`、`[类别]`、`[名称]` 之间。

正确写法：

```
[DLC][扩展][新版地城][!原版地城]新版地城(Author)
```

---

## 格式速查

```
[DLC][角色|事件|扩展][名称][!互斥目标][>替换目标][<前置需求]描述(作者-信息)
 ───  ──────────────  ────  ─────────  ─────────  ─────────  ────  ──────────
 必填     必填        必填    可选       可选       可选     可选    可选
```

**记住**：前三个方括号 `[DLC][类别][名称]`
决定了条目的归属，关系标记在名称之后，作者信息在最末尾的括号中。
